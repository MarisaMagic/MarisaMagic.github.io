

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="https://sukicdn.com/wyx/i/2025/01/10/3lc6t.png">
  <link rel="icon" href="https://sukicdn.com/wyx/i/2025/01/10/3lc6t.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#FFB90F">
  <meta name="author" content="MarisaMagic">
  <meta name="keywords" content="">
  
    <meta name="description" content="什么是进程，进程与程序的区别；并发与并行；单道程序设计与多道程序设计；操作系统的几种存储介质；CPU 的组成、MMU 内存管理单元；进程控制块 PCB、进程的 5 种状态。">
<meta property="og:type" content="article">
<meta property="og:title" content="「Linux 系统编程」进程相关概念">
<meta property="og:url" content="https://marisamagic.github.io/2025/08/30/20250830_2/index.html">
<meta property="og:site_name" content="MarisaMagic&#39;s Blog">
<meta property="og:description" content="什么是进程，进程与程序的区别；并发与并行；单道程序设计与多道程序设计；操作系统的几种存储介质；CPU 的组成、MMU 内存管理单元；进程控制块 PCB、进程的 5 种状态。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://sukicdn.com/wyx/i/2025/08/30/7gsr3.png">
<meta property="article:published_time" content="2025-08-30T09:58:52.190Z">
<meta property="article:modified_time" content="2025-08-30T13:44:20.908Z">
<meta property="article:author" content="MarisaMagic">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://sukicdn.com/wyx/i/2025/08/30/7gsr3.png">
  
  
  
  <title>「Linux 系统编程」进程相关概念 - MarisaMagic&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/KaTeX/0.16.2/katex.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/scrollAnimation.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"marisamagic.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#F9B002","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"https://sukicdn.com/wyx/i/2025/01/10/dlz.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 90vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>MarisaMagic | 雾雨魔法店</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/" target="_self">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://sukicdn.com/wyx/i/2025/08/30/7gsr3.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="「Linux 系统编程」进程相关概念"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        MarisaMagic
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-08-30 17:58" pubdate>
          2025年8月30日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          4.2k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          35 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
        <div class="scroll-down-bar">
          <i class="iconfont icon-arrowdown"></i>
        </div>
      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">「Linux 系统编程」进程相关概念</h1>
            
            
              <div class="markdown-body">
                
                <h2 id="1-进程与程序">1 进程与程序</h2>
<h3 id="1-1-什么是程序">1.1 什么是程序</h3>
<p><strong>定义</strong>：<strong>程序</strong> 是一组静态的指令集合，通常以一个文件的形式存储在磁盘上（例如，<code>/usr/bin/chromium</code> 是一个Chrome浏览器的可执行程序文件）。</p>
<p><strong>本质</strong>：只是一堆存储在磁盘上的二进制代码和数据，<strong>本身并不执行任何操作。</strong></p>
<hr>
<h3 id="1-2-什么是进程">1.2 什么是进程</h3>
<p><strong>定义</strong>：<strong>进程</strong> 是一个 <strong>正在执行的程序的实例</strong>。当一个程序被加载到内存并开始执行时，就变成了一个进程。执行完毕就会被销毁。</p>
<p><strong>本质</strong>：<strong>进程</strong> 是一个活动的实体，<strong>拥有自己的生命周期和状态</strong>。<strong>进程</strong> 不仅是程序的代码，还包括当前的活动（如程序计数器的值、寄存器的内容）、以及运行所需的系统资源（如内存、打开的文件等）。</p>
<p>每个进程都 <strong>拥有独立的地址空间</strong> 和 <strong>系统资源</strong>，一个进程通常不会直接影响另一个进程（除非通过进程间通信IPC）。</p>
<p><strong>进程的并发</strong>：在操作系统的管理下（通过进程调度、上下文切换），<strong>多个进程在一段时间内同时处于已开始运行但尚未结束的状态</strong>（宏观上看这些进程像是在同时进行），<strong>在单个 CPU 上</strong> 模拟出多任务同时执行的效果。</p>
<hr>
<h3 id="1-3-程序与进程的关系">1.3 程序与进程的关系</h3>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left"><strong>程序</strong></th>
<th style="text-align:left"><strong>进程</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>本质</strong></td>
<td style="text-align:left"><strong>静态的</strong> 指令集合（文件）</td>
<td style="text-align:left"><strong>动态的</strong> 执行实例（活动）</td>
</tr>
<tr>
<td style="text-align:left"><strong>存在状态</strong></td>
<td style="text-align:left"><strong>永久的</strong>，存储在磁盘等介质上</td>
<td style="text-align:left"><strong>暂时的</strong>，有生命周期（创建、执行、终止）</td>
</tr>
<tr>
<td style="text-align:left"><strong>组成</strong></td>
<td style="text-align:left">代码、静态数据</td>
<td style="text-align:left"><strong>程序代码 + 当前状态（计数器、寄存器） + 相关资源（内存、文件、CPU时间片）</strong></td>
</tr>
<tr>
<td style="text-align:left"><strong>归属关系</strong></td>
<td style="text-align:left"><strong>一对多</strong>：一个程序可以对应多个进程</td>
<td style="text-align:left"><strong>多对一</strong>：一个进程只能对应一个特定的程序</td>
</tr>
<tr>
<td style="text-align:left"><strong>资源分配</strong></td>
<td style="text-align:left">不占用系统运行资源（CPU、内存）</td>
<td style="text-align:left">是 <strong>系统进行资源分配和调度</strong> 的基本独立单位</td>
</tr>
</tbody>
</table>
<hr>
<br/>
<h2 id="2-并发与并行">2 并发与并行</h2>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left"><strong>并发</strong></th>
<th style="text-align:left"><strong>并行</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>核心概念</strong></td>
<td style="text-align:left"><strong>处理多个任务的能力</strong></td>
<td style="text-align:left"><strong>同时执行多个任务的能力</strong></td>
</tr>
<tr>
<td style="text-align:left"><strong>本质</strong></td>
<td style="text-align:left"><strong>逻辑上</strong> 的同时发生（同一时间段内推进）</td>
<td style="text-align:left"><strong>物理上</strong> 的同时执行（真正同一时刻一起运行）</td>
</tr>
<tr>
<td style="text-align:left"><strong>硬件要求</strong></td>
<td style="text-align:left">单核 CPU 即可实现</td>
<td style="text-align:left"><strong>必须有多核 CPU</strong></td>
</tr>
<tr>
<td style="text-align:left"><strong>图示</strong></td>
<td style="text-align:left"><strong>交替</strong></td>
<td style="text-align:left"><strong>同时</strong></td>
</tr>
</tbody>
</table>
<p>并行是并发的 <strong>真子集</strong>。并发的范围更广，包含了并行。</p>
<hr>
<br/>
<h2 id="3-单道程序设计与多道程序设计">3 单道程序设计与多道程序设计</h2>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left"><strong>单道程序设计</strong></th>
<th style="text-align:left"><strong>多道程序设计</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>允许内存中的程序数量</strong></td>
<td style="text-align:left"><strong>一个</strong></td>
<td style="text-align:left"><strong>多个</strong></td>
</tr>
<tr>
<td style="text-align:left"><strong>CPU 利用率</strong></td>
<td style="text-align:left"><strong>极低</strong>（大量时间在等待I/O）</td>
<td style="text-align:left"><strong>高</strong>（CPU总在工作，减少空闲）</td>
</tr>
<tr>
<td style="text-align:left"><strong>资源使用</strong></td>
<td style="text-align:left"><strong>程序独占全部资源</strong></td>
<td style="text-align:left"><strong>资源由多个程序共享</strong></td>
</tr>
<tr>
<td style="text-align:left"><strong>目标</strong></td>
<td style="text-align:left">简化设计，方便操作</td>
<td style="text-align:left"><strong>最大化系统效率</strong> 和吞吐量</td>
</tr>
<tr>
<td style="text-align:left"><strong>复杂性</strong></td>
<td style="text-align:left">管理简单</td>
<td style="text-align:left">管理复杂，需要解决内存管理、调度、同步等问题</td>
</tr>
<tr>
<td style="text-align:left"><strong>时代背景</strong></td>
<td style="text-align:left">早期批处理系统</td>
<td style="text-align:left">现代操作系统的 <strong>基石</strong></td>
</tr>
</tbody>
</table>
<p><strong>多道程序设计是现代所有操作系统（包括Windows, Linux, macOS等）的基础和核心特征。</strong> 通过组织多个程序交替共享CPU，解决了单道程序中 CPU等待 I/O 的巨大效率问题。</p>
<hr>
<br/>
<h2 id="4-操作系统的存储介质">4 操作系统的存储介质</h2>
<h3 id="4-1-高速临时存储介质（内存-缓存，断电数据丢失）">4.1 高速临时存储介质（内存 / 缓存，断电数据丢失）</h3>
<p><strong>高速临时存储介质</strong> 的核心特点是读写 <strong>速度极快</strong>，但 <strong>容量较小、成本高</strong>，主要用于 OS <strong>临时存放正在运行的程序、数据和内核指令</strong>，确保 CPU 能快速获取数据，避免等待低速外存。</p>
<h4 id="4-1-1-SRAM（静态随机存取存储器，构成-Cache）">4.1.1 <strong>SRAM</strong>（静态随机存取存储器，构成 Cache）</h4>
<p><strong>SRAM</strong>（静态随机存取存储器）是构成 <strong>CPU缓存（Cache）</strong> 的核心硬件基础。<strong>SRAM</strong> 无需刷新电路，功耗低，具有极低的随机访问延迟，容量通常较小（通常为 MB 级）。</p>
<p><strong>SRAM</strong> 作为 CPU 高速缓存（L1/L2/L3 Cache），存放 <em><strong>CPU 最常访问的指令和数据</strong></em>，减少 CPU 与内存的交互延迟。</p>
<p>现代 CPU 的缓存（Cache）分为三级，每一级均使用 <strong>SRAM</strong>：</p>
<ul>
<li>
<p><strong>L1 Cache</strong>：每个CPU核心独占，容量32~64KB，分为指令缓存（I-Cache）和数据缓存（D-Cache）。其延迟最低，主要优化速度。通常采用采用高频低延迟的 8T-SRAM。</p>
</li>
<li>
<p><strong>L2 Cache</strong>：每个核心独占或共享，容量256KB~1MB，平衡速度与容量。使用高密度 6T-SRAM，容量更大。</p>
</li>
<li>
<p><strong>L3 Cache</strong>：多核共享，容量2~64MB，主要减少多核访问主存的冲突。采用低功耗 SRAM。</p>
</li>
</ul>
<hr>
<h4 id="4-1-2-DRAM（动态随机存取存储器，构成主内存）">4.1.2 <strong>DRAM</strong>（动态随机存取存储器，构成主内存）</h4>
<p><strong>与 SRAM 相比</strong>，<strong>DRAM</strong> 的结构更简单，具有更高的密度和更低的成本，但其访问速度较慢，耗电量较大，容量中等（通常为 GB 级）。</p>
<p><strong>DRAM</strong> 广泛应用于计算机的 <strong>主内存</strong>（内存条），存放 <em><strong>OS 内核、正在运行的应用程序（如浏览器、文档）和 临时数据</strong></em>。</p>
<hr>
<h4 id="4-1-3-SRAM-和-DRAM-总结">4.1.3 SRAM 和 DRAM 总结</h4>
<p><strong>SRAM</strong>（静态随机访问存储器）和 <strong>DRAM</strong>（动态随机访问存储器）是两种常用的内存技术。</p>
<ul>
<li><strong>存储方式</strong>：SRAM 使用触发器存储数据，不需要定期刷新；DRAM 需要定期刷新以保持数据。</li>
<li><strong>速度</strong>：SRAM 的读写速度最快，适合用作 CPU 缓存；DRAM 速度较快（慢于 SRAM），但适合较大容量内存。</li>
</ul>
<p>当 CPU 请求数据时，<strong>首先查询 L1 Cache，若未命中则依次查询 L2 和 L3 Cache，最终访问主存（DRAM）</strong>。</p>
<hr>
<h3 id="4-2-低速持久存储介质（外存，断电数据保留）">4.2 低速持久存储介质（外存，断电数据保留）</h3>
<p>这类介质的核心特点是 <strong>容量大、成本低</strong>，但 <strong>读写速度慢</strong>（毫秒级或秒级），主要用于 <strong>OS 持久化存储用户数据</strong>（如文件、照片）、<strong>系统文件</strong>（如 Windows 的C:\Windows、Linux 的/boot）和 <strong>应用程序安装包</strong>。</p>
<h4 id="4-2-1-机械硬盘（HDD，Hard-Disk-Drive）">4.2.1 机械硬盘（HDD，Hard Disk Drive）</h4>
<p><strong>物理结构</strong>：由旋转的磁盘片（磁性材料）、读写磁头组成，通过磁头移动和磁盘旋转实现数据读写。</p>
<p><strong>核心特性</strong>：</p>
<ul>
<li>相比 SSD 速度较慢（寻道时间～5-10ms，连续读写速度～100-200MB/s）；</li>
<li>容量大（TB 级，主流 2-16TB）、成本低（每 GB 成本远低于 SSD）；</li>
<li>怕震动（磁头易划伤磁盘片导致数据损坏）。</li>
</ul>
<p><strong>机械硬盘</strong>（HDD，Hard Disk Drive）是 <strong>传统 PC / 服务器的主要外存</strong>，用于存放大量不常快速访问的数据（如备份文件、视频库），或作为早期设备的低成本系统盘。</p>
<hr>
<h4 id="4-2-2-固态硬盘（SSD，Solid-State-Drive）">4.2.2 固态硬盘（SSD，Solid State Drive）</h4>
<p><strong>物理结构</strong>：使用闪存芯片来存储数据，无机械部件，靠电子信号读写数据。</p>
<p><strong>核心特性</strong>：</p>
<ul>
<li>速度快（随机读写速度～1000-7000MB/s，远超 HDD），无寻道时间；</li>
<li>抗震性强、噪音低、功耗低；</li>
<li>成本高于 HDD，容量逐步提升（主流 512GB-4TB），存在 “写入寿命”（TBW，总写入字节数，消费级 SSD 通常足够日常使用）。</li>
</ul>
<p><strong>固态硬盘</strong>（SSD，Solid State Drive）是 <strong>当前主流系统盘（存放 OS 内核、常用应用）</strong>，大幅提升开机速度、应用启动速度。</p>
<p>可以在自己电脑的任务管理器上看到电脑磁盘的类型：</p>
<p><img src="https://sukicdn.com/wyx/i/2025/08/30/3sf6.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt=""></p>
<hr>
<h4 id="4-2-3-移动存储介质">4.2.3 移动存储介质</h4>
<p>这类介质 <strong>便携性强，通常即插即用</strong> 主要用于跨设备数据传输，OS 需通过驱动支持其读写。</p>
<ul>
<li>
<p><strong>U 盘</strong>（USB 闪存盘）：基于闪存芯片，容量通常 16GB-2TB，接口以 USB 3.0/3.1 为主（速度～100-500MB/s），适合小文件传输（如文档、安装包）。</p>
</li>
<li>
<p><strong>移动硬盘</strong>（分 “移动 HDD” 和 “移动 SSD”）：</p>
<ul>
<li>移动 HDD：容量 2-16TB，速度～100-200MB/s，适合大容量备份（如照片库）；</li>
<li>移动 SSD：容量 512GB-4TB，速度～500-2000MB/s，适合高速传输（如 4K 视频）。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="4-3-长期归档存储介质（海量数据备份，读写频率低）">4.3 长期归档存储介质（海量数据备份，读写频率低）</h3>
<p>这类介质的核心特点是 <strong>寿命长、稳定性高</strong>，但 <strong>读写速度极慢</strong>，主要用于 OS 或用户的 “冷备份”（长期不访问但需保留的数据）。</p>
<ul>
<li>
<p><strong>光盘</strong>（CD/DVD/Blu-ray）：速度慢（MB 级 /s），易刮伤，需光驱读取。早期用于存放系统安装镜像（如 Windows 安装光盘）、软件安装包、影音文件，当前逐步被 U 盘 / 网盘替代。</p>
</li>
<li>
<p><strong>磁带</strong>（磁带库）： 速度慢（顺序读写～100-300MB/s），成本极低。适用于OS 日志、用户海量数据（如银行交易记录、云存储冷数据）的长期归档备份，不适合随机访问。</p>
</li>
</ul>
<hr>
<p>操作系统存储结构层次示意图：</p>
<p><img src="https://sukicdn.com/wyx/i/2025/08/30/5b9o8.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt="操作系统的存储结构层次示意图"></p>
<hr>
<br/>
<h2 id="5-CPU-及其组成">5 CPU 及其组成</h2>
<h3 id="5-1-CPU-中央处理器">5.1 CPU 中央处理器</h3>
<p><strong>CPU 中央处理器</strong> 负责执行程序中的指令、进行算术和逻辑运算、控制其他组件协调工作。</p>
<p><strong>核心组成部分：</strong></p>
<ul>
<li>
<p><strong>控制单元</strong>（CU）：负责从内存中 <strong>读取指令、解码指令</strong>。根据指令的译码结果，生成相应的控制信号，控制运算器、寄存器和其他部件协同工作。</p>
</li>
<li>
<p><strong>算术逻辑单元</strong>（ALU）：负责执行所有数学运算（加、减、乘、除）和逻辑运算（与、或、非、比较）。</p>
</li>
<li>
<p><strong>寄存器组</strong>：是 CPU 内部的微小、高速的存储单元。</p>
<p><strong>寄存器</strong> 是 CPU <strong>直接进行操作的地方</strong>。<strong>寄存器</strong> 用于存储当前正在被执行的指令、操作数、中间结果以及指令的地址等。<strong>数量很少，但速度极快。</strong></p>
</li>
<li>
<p><strong>缓存</strong>（Cache）：集成在 CPU 内部的高速存储器。</p>
</li>
<li>
<p><strong>总线接口</strong>：负责管理 CPU 与系统其他部分（如内存、输入/输出设备）之间的数据通信。</p>
</li>
</ul>
<p><img src="https://sukicdn.com/wyx/i/2025/08/30/4b06.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt=""></p>
<hr>
<h3 id="5-2-CPU-工作举例">5.2 CPU 工作举例</h3>
<p>以一个简单的加法指令 C = A + B 为例，CPU 的工作流程如下：</p>
<ol>
<li>
<p><strong>取指令</strong>：控制单元（CU）从内存中 <strong>取出 ADD A, B, C 这条指令</strong>，并将其 <strong>加载到指令寄存器</strong> 中。</p>
</li>
<li>
<p><strong>解码指令</strong>：控制单元（CU）<strong>解码这条指令</strong>，明白需要做加法。</p>
</li>
<li>
<p><strong>取数据</strong>：CU 指挥总线接口单元，将内存中变量 A 和 B 的值（<strong>如果缓存 cache 中有副本，则直接从缓存 cache 中读取</strong>）<strong>加载到通用寄存器</strong> 中。</p>
</li>
<li>
<p><strong>执行计算</strong>：CU 命令 <strong>算术逻辑单元</strong>（ALU）从寄存器中取出 A 和 B 的值进行 <strong>加法运算</strong>。</p>
</li>
<li>
<p><strong>存结果</strong>：ALU 将计算结果 <strong>写回另一个寄存器</strong>。</p>
</li>
<li>
<p><strong>写回内存</strong>：CU 最终将寄存器中的结果 <strong>写回内存中变量 C 所在的位置</strong>（也会同时更新缓存）。</p>
</li>
</ol>
<p>整个过程将在纳秒级别内完成。</p>
<hr>
<br/>
<h2 id="6-MMU-内存管理单元">6 MMU 内存管理单元</h2>
<h3 id="6-1-MMU-内存管理单元">6.1 MMU 内存管理单元</h3>
<p><strong>MMU 内存管理单元</strong>（Memory Management Unit）负责处理 CPU 核心发出的内存访问请求，位于 CPU 内。</p>
<p><strong>MMU 内存管理单元</strong> 主要功能是 <strong>将虚拟地址转换为物理地址</strong>。MMU 为每个进程提供一个 <strong>独立的、统一的、连续的虚拟地址空间</strong>，并将这个虚拟空间 <strong>映射到分散的物理内存页上</strong>。</p>
<p><img src="https://sukicdn.com/wyx/i/2025/08/30/zp46.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt=""></p>
<p><strong>为什么需要 MMU</strong>：</p>
<ul>
<li><strong>安全性差</strong>：如果一个程序可以随意读写其他程序甚至操作系统的内存数据，可能导致系统崩溃或数据泄露；</li>
<li><strong>内存管理困难</strong>：随着程序的加载和退出，可用物理内存会变得零散破碎，难以分配大块的连续内存；</li>
<li><strong>并发困难</strong>：每个程序都需要知道自己被加载到物理内存的什么位置，这给同时运行多个程序带来了巨大复杂度。</li>
</ul>
<p>这就是为什么需要 <strong>MMU 内存管理单元</strong>，MMU 通过虚拟内存技术解决了上述所有问题。</p>
<p><img src="https://sukicdn.com/wyx/i/2025/08/30/70y2y.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt=""></p>
<hr>
<h3 id="6-2-MMU-与权限设置">6.2 MMU 与权限设置</h3>
<p>MMU 的工作原理是通过查询页表来实现虚拟地址到物理地址的转换。每个页表项不仅包含物理页帧号，<strong>还包含控制该页访问权限的位</strong>。</p>
<ul>
<li>
<p><strong>P (Present)位</strong>：该页是否在物理内存中。如果为 <code>0</code>，访问会触发<strong>缺页异常</strong>。</p>
</li>
<li>
<p><strong>R/W (Read/Write)位</strong>：</p>
<ul>
<li><code>0</code> = 只读</li>
<li><code>1</code> = 可读可写</li>
<li>当CPU处于低特权级（如用户模式）时，尝试写入一个<code>R/W=0</code>的页会触发<strong>保护异常</strong>。</li>
</ul>
</li>
<li>
<p><strong>U/S (User/Supervisor)位</strong>：</p>
<ul>
<li><code>0</code> = Supervisor 页。只有 <strong>操作系统内核</strong> 可以访问。</li>
<li><code>1</code> = User 页。所有程序（用户态和内核态）都可以访问。</li>
<li>当CPU处于低特权级（用户模式）时，尝试访问一个<code>U/S=0</code>的页会触发<strong>保护异常</strong>。</li>
</ul>
</li>
<li>
<p><strong>XD (Execute Disable) 位</strong>（Intel）或 <strong>NX (No Execute) 位</strong>（ARM）：</p>
<ul>
<li><code>1</code> = 该页的内容 <strong>不可作为指令执行</strong>。</li>
<li>这是一种重要的安全特性，防止攻击者将恶意代码写入数据区（如栈或堆）然后跳转执行。</li>
</ul>
</li>
</ul>
<p><strong>MMU</strong> 在每次内存访问时，检查当前 CPU的特权级和访问类型（读、写、执行），并与页表项中的这些权限位进行比对。如果违反任何一条规则，MMU会立即向 CPU 报告一个 <strong>异常</strong>。</p>
<hr>
<br/>
<h2 id="7-PCB-进程控制块">7 PCB 进程控制块</h2>
<h3 id="7-1-PCB-进程控制块及其组成">7.1 PCB 进程控制块及其组成</h3>
<p><strong>PCB 进程控制块</strong>（Process Control Block）是操作系统用于 <strong>管理和描述一个运行中程序（进程）的数据结构</strong>。存放在操作系统内核所在的内存空间（内核空间）中。</p>
<p><strong>PCB 进程控制块</strong> 包含了进程中的重要信息（如进程 id、进程状态、工作位置等），从而支持操作系统对进程进行有效的管理和调度。</p>
<p><strong>PCB 进程控制块</strong> 主要涵盖信息：</p>
<ul>
<li><strong>进程标识</strong>：包括进程 ID（PID）、父进程 ID（PPID）等。</li>
<li><strong>进程状态</strong>：如运行、就绪、阻塞等。</li>
<li><strong>CPU 寄存器状态</strong>：保存进程在切换时的 CPU 上下文。</li>
<li><strong>调度信息</strong>：包含优先级、调度队列位置等。</li>
<li><strong>内存管理信息</strong>：记录进程所使用的地址空间，包括代码段、数据段和堆栈段。</li>
<li><strong>资源分配信息</strong>：跟踪进程所持有的文件描述符、打开的设备等资源。</li>
<li><strong>会计信息</strong>：记录 CPU 使用时间、内存使用量等统计信息。</li>
</ul>
<hr>
<h3 id="7-2-PCB-进程控制块工作（以进程切换为例）">7.2 PCB 进程控制块工作（以进程切换为例）</h3>
<ol>
<li>
<p><strong>中断发生</strong>：一个正在运行的进程由于时间片用完或等待 I/O 等原因需要被挂起。</p>
</li>
<li>
<p><strong>保存现场</strong>：操作系统将当前 CPU 中所有寄存器的值保存到该进程的 PCB 中。</p>
</li>
<li>
<p><strong>选择新进程</strong>：调度器根据各个进程 PCB 中的调度信息（如状态、优先级），选择一个就绪的进程来运行。</p>
</li>
<li>
<p><strong>恢复现场</strong>：操作系统将新进程 PCB 中保存的寄存器值（上次的现场）全部重新加载到 CPU 的各个寄存器中。</p>
</li>
<li>
<p><strong>开始运行</strong>：程序计数器等寄存器被恢复，CPU 开始执行新进程的代码。</p>
</li>
</ol>
<p>这个过程被称为 <strong>上下文切换</strong>，而 PCB 就是上下文切换的核心。</p>
<hr>
<h3 id="7-3-Linux-中的-PCB">7.3 Linux 中的 PCB</h3>
<p>在 Linux 系统中，PCB 的具体实现是一个名为 <code>task_struct</code> 的非常庞大的结构体（定义在 <code>sched.h</code> 头文件中）。它包含了上述的所有信息以及其他更多信息。</p>
<p><img src="https://sukicdn.com/wyx/i/2025/08/30/1fof76.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt=""></p>
<p>在 Linux 系统中，可以通过命令 <code>ps -aux</code> 查看到的进程信息，绝大部分都来自于每个进程对应的 <code>task_struct</code>：</p>
<p><img src="https://sukicdn.com/wyx/i/2025/08/30/123x6.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt=""></p>
<hr>
<h3 id="7-4-进程的-5-种状态">7.4 进程的 5 种状态</h3>
<ol>
<li>
<p><strong>新建</strong></p>
<p>进程正在被创建（例如，通过 <code>fork()</code> 系统调用）。操作系统正在为其 <strong>分配PCB、初始化资源、建立地址空间</strong> 等。这是一个短暂的准备状态。</p>
</li>
<li>
<p><strong>就绪</strong></p>
<p>进程 <strong>已准备好运行，只差CPU</strong>。它已经获得了除CPU之外所有必需的资源（如内存、文件等）。通常有多个进程处于就绪状态，它们在一个叫 <strong>就绪队列</strong> 的数据结构中排队，等待操作系统的调度器来选择。</p>
</li>
<li>
<p><strong>运行</strong></p>
<p>进程 <strong>正在CPU上执行其指令</strong>。在单核CPU系统中，任何时刻最多只有一个进程处于运行状态。</p>
</li>
<li>
<p><strong>阻塞</strong></p>
<p>进程 <strong>正在等待某个事件的发生</strong>，在事件发生之前无法继续执行（例如，等待用户输入、等待磁盘读取数据、等待另一个进程发来信号）。处于阻塞状态的进程即使分配CPU给它，它也无法运行。它们会在 <strong>阻塞队列</strong> 中等待。</p>
</li>
<li>
<p><strong>终止</strong></p>
<p>进程 <strong>已经结束执行</strong>（正常结束或被强制杀死）。操作系统开始回收分配给它的资源（内存、打开的文件等），并销毁其PCB。是一个清理和销毁的状态。</p>
</li>
</ol>
<p><img src="https://sukicdn.com/wyx/i/2025/08/30/11x2b.jpg" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt=""></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E8%BF%BD%E9%80%90%E7%B9%81%E6%98%9F/" class="category-chain-item">追逐繁星</a>
  
  
    <span>></span>
    
  <a href="/categories/%E8%BF%BD%E9%80%90%E7%B9%81%E6%98%9F/Linux-%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/" class="category-chain-item">Linux 系统编程</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Linux/" class="print-no-link">#Linux</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>「Linux 系统编程」进程相关概念</div>
      <div>https://marisamagic.github.io/2025/08/30/20250830_2/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>MarisaMagic</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年8月30日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/09/01/20250901/" title="「Linux 系统编程」fork() 创建子进程">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">「Linux 系统编程」fork() 创建子进程</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/08/30/20250830/" title="「Linux 系统编程」dup 与 dup2 函数">
                        <span class="hidden-mobile">「Linux 系统编程」dup 与 dup2 函数</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  








    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
           <div style="font-size: 1rem"> <span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span> <script src="/js/duration.js"></script> </div> Blog by MarisaMagic <br/> Made with  <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>




  
<script src="/js/scrollAnimation.js"></script>



<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
