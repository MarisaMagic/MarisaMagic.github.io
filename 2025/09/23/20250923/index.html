

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="https://sukicdn.com/wyx/i/2025/01/10/3lc6t.png">
  <link rel="icon" href="https://sukicdn.com/wyx/i/2025/01/10/3lc6t.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#FFB90F">
  <meta name="author" content="MarisaMagic">
  <meta name="keywords" content="">
  
    <meta name="description" content="一篇文章了解计算机网络核心知识😉">
<meta property="og:type" content="article">
<meta property="og:title" content="「Linux 网络编程」计算机网络核心知识">
<meta property="og:url" content="https://marisamagic.github.io/2025/09/23/20250923/index.html">
<meta property="og:site_name" content="MarisaMagic&#39;s Blog">
<meta property="og:description" content="一篇文章了解计算机网络核心知识😉">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://sukicdn.com/wyx/i/2025/09/24/1qdau.jpg">
<meta property="article:published_time" content="2025-09-23T14:13:11.241Z">
<meta property="article:modified_time" content="2025-09-25T05:10:57.628Z">
<meta property="article:author" content="MarisaMagic">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="计算机网络、网络编程">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://sukicdn.com/wyx/i/2025/09/24/1qdau.jpg">
  
  
  
  <title>「Linux 网络编程」计算机网络核心知识 - MarisaMagic&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/KaTeX/0.16.2/katex.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/scrollAnimation.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"marisamagic.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#F9B002","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"https://sukicdn.com/wyx/i/2025/01/10/dlz.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 90vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>MarisaMagic | 雾雨魔法店</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/" target="_self">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://sukicdn.com/wyx/i/2025/09/24/1qdau.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="「Linux 网络编程」计算机网络核心知识"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        MarisaMagic
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-09-23 22:13" pubdate>
          2025年9月23日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          15k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          126 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
        <div class="scroll-down-bar">
          <i class="iconfont icon-arrowdown"></i>
        </div>
      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">「Linux 网络编程」计算机网络核心知识</h1>
            
            
              <div class="markdown-body">
                
                <h2 id="0-前言：网络的起点——两台电脑的连接">0 前言：网络的起点——两台电脑的连接</h2>
<p>我有一台电脑，我的老婆 <a target="_blank" rel="noopener" href="https://mzh.moegirl.org.cn/%E9%9B%BE%E9%9B%A8%E9%AD%94%E7%90%86%E6%B2%99">魔理沙</a> 也有一台电脑，现在我们想要互相发送消息进行聊天。</p>
<p>最简单的方式就是用一根网线直接连接这两台电脑，这样我和可爱的魔理沙就可以尽情聊天啦😘！ 这就是网络中最基础的连接方式——<strong>点对点连接</strong>。</p>
<p><img src="https://sukicdn.com/wyx/i/2025/09/23/1jzxc2.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt="点对点连接"></p>
<hr>
<p>在上面的最简单的点对点连接方式中，没有任何路由器、没有任何交换机，仅通过物理介质（网线）实现两台设备的通信。</p>
<p>然而，如果要实现 100 台、1000 台、10000 台甚至全世界的电脑都是先互通，怎么办呢？如果依旧采取点对点连接的方式，那么每两个设备之间都要连接一个网线，这在数量上完全不可取，况且还要造出可以跨越太平洋的网线… 🤔</p>
<p>显然，我们需要一个完整的 “网络规则” 去实现这个看似不可能的事情。</p>
<hr>
<p>接下来，将从硬件设备到软件协议，从分层架构到数据传输流程，一步步拆解计算机网络的核心知识，理解“数据是如何通过网络跨越山海的”。</p>
<p><img src="https://sukicdn.com/wyx/i/2025/09/23/15l23.jpeg" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt=""></p>
<hr>
<br/>
<h2 id="1-网络基本概念：什么是网络">1 网络基本概念：什么是网络</h2>
<p>网络的基础定义、功能和分类——这些是理解后续计算机网络内容的根基。</p>
<h3 id="1-1-网络的定义和组成">1.1 网络的定义和组成</h3>
<p><strong>定义</strong>：将地理上分散的、具有独立功能的多台计算机，通过 <strong>传输介质</strong>（如网线、光纤）和 <strong>网络设备</strong>（如交换机、路由器）连接起来，再通过一套统一的 <strong>网络协议</strong>（如TCP/IP）实现数据通信和资源共享的系统。</p>
<p>总的来说：设备+介质+协议 三者缺一不可。😌</p>
<p><strong>组成</strong> 分为两部分：</p>
<ul>
<li>
<p><em><strong>硬件部分</strong></em>：</p>
<ul>
<li><strong>终端设备</strong>：电脑、手机、服务器、打印机等；</li>
<li><strong>传输介质</strong>：有线（网线、光纤）、无线（WiFi、5G）；</li>
<li><strong>网络设备</strong>：中继器、集线器、交换机、路由器等。</li>
</ul>
</li>
<li>
<p><em><strong>软件部分</strong></em>：</p>
<ul>
<li><strong>网络协议</strong>：TCP、IP、HTTP 等（相当于“通信规则”）；</li>
<li><strong>操作系统</strong>：Windows、Linux 等（提供网络接口）；</li>
<li><strong>应用程序</strong>：浏览器、QQ、FTP 客户端等。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="1-2-网络的核心功能">1.2 网络的核心功能</h3>
<p>网络存在的意义，本质是解决 <strong>信息传递</strong> 和 <strong>资源共享</strong> 的问题。</p>
<p>主要核心功能如下：</p>
<ol>
<li><strong>数据通信</strong>：最基础的功能，比如微信发消息、视频通话、邮件传输；</li>
<li><strong>资源共享</strong>：分为“硬件共享”（如共享公司打印机）和“软件/数据共享”（如共享服务器上的文件、访问百度的数据库）；</li>
<li><strong>分布式处理</strong>：将复杂任务拆分给多台计算机协同完成，比如云计算（你用的在线文档，其实是多台服务器共同处理数据）；</li>
<li><strong>提高可靠性</strong>：单台设备故障时，数据可通过其他路径传输，比如互联网中某条光缆断了，数据会自动走备用路线。</li>
</ol>
<hr>
<h3 id="1-3-网络的分类">1.3 网络的分类</h3>
<ul>
<li>
<p><em><strong>按覆盖范围划分</strong></em></p>
<table>
<thead>
<tr>
<th>分类</th>
<th>覆盖范围</th>
<th>典型场景</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>局域网</strong>（LAN）</td>
<td>几百米到几公里</td>
<td>家庭WiFi、公司内网</td>
<td>速度快（100Mbps-10Gbps）、延迟低</td>
</tr>
<tr>
<td><strong>城域网</strong>（MAN）</td>
<td>一座城市</td>
<td>城市政务网、运营商城域网</td>
<td>连接多个LAN，速度中等</td>
</tr>
<tr>
<td><strong>广域网</strong>（WAN）</td>
<td>跨城市/国家</td>
<td>互联网骨干网、企业分支互联</td>
<td>覆盖广、速度较慢、延迟高</td>
</tr>
<tr>
<td><strong>互联网</strong>（Internet）</td>
<td>全球</td>
<td>我们日常用的“上网”</td>
<td>由无数LAN、MAN、WAN组成</td>
</tr>
</tbody>
</table>
</li>
<li>
<p><em><strong>按拓扑结构划分</strong></em></p>
<p>“拓扑结构”指网络中设备的连接方式，决定了网络的稳定性和维护成本。</p>
<ul>
<li><strong>总线型</strong>：所有设备连在一条“总线”（如同轴电缆）上，成本低但故障难排查（某一点断了整个网络瘫痪），已淘汰😣；</li>
</ul>
<p><img src="https://sukicdn.com/wyx/i/2025/09/23/v0k.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt="总线型"></p>
<ul>
<li><strong>星型</strong>：所有设备连到一个中心设备（如交换机），故障只影响单台设备，维护方便，是现在最常用的结构；</li>
</ul>
<p><img src="https://sukicdn.com/wyx/i/2025/09/23/168tc.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt="星型"></p>
<ul>
<li><strong>环型</strong>：设备首尾相连成环，数据单向传输，稳定性高但扩容难（如早期的令牌环网）；</li>
</ul>
<p><img src="https://sukicdn.com/wyx/i/2025/09/23/8cqnz.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt="环型"></p>
<ul>
<li><strong>网状型</strong>：每台设备都和多台设备连接，可靠性最高（多条备用路径），但成本高，仅用于核心网络（如互联网骨干网）。</li>
</ul>
<p><img src="https://sukicdn.com/wyx/i/2025/09/23/8f3my.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt="网状型"></p>
</li>
<li>
<p><em><strong>按使用者划分</strong></em></p>
<ul>
<li><strong>公用网</strong>：面向公众开放，由运营商维护，比如中国移动的宽带、联通的 5G 网络；</li>
<li><strong>专用网</strong>：仅特定用户使用，比如企业内网、政府专网、银行内部网络，安全性高。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="1-4-网络性能指标">1.4 网络性能指标</h3>
<p>我们常说“网速快”“网络卡”，其实是对性能指标的直观感受。网络核心指标如下：</p>
<ol>
<li>
<p><em><strong>速率（比特率）</strong></em>：单位时间内传输的二进制位数（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>bps</mtext></mrow><annotation encoding="application/x-tex">\text{bps}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">bps</span></span></span></span></span>，如 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mtext>Mbps</mtext><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup><mtext>bps</mtext></mrow><annotation encoding="application/x-tex">1 \text{Mbps} = 10^6 \text{bps}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mord text"><span class="mord">Mbps</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mord text"><span class="mord">bps</span></span></span></span></span>），是我们常说的“网速”，比如家庭宽带 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mtext>Mbps</mtext></mrow><annotation encoding="application/x-tex">100 \text{Mbps}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">100</span><span class="mord text"><span class="mord">Mbps</span></span></span></span></span> 指的就是速率；</p>
</li>
<li>
<p><em><strong>带宽</strong></em>：网络的 <strong>最大传输能力</strong>，比如 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mtext>Mbps</mtext></mrow><annotation encoding="application/x-tex">100 \text{Mbps}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">100</span><span class="mord text"><span class="mord">Mbps</span></span></span></span></span> 带宽意味着最快能传 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mtext>Mbps</mtext></mrow><annotation encoding="application/x-tex">100 \text{Mbps}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">100</span><span class="mord text"><span class="mord">Mbps</span></span></span></span></span>，实际速率会低于带宽（受信号衰减、设备性能影响）；</p>
</li>
<li>
<p><em><strong>时延</strong></em>：<strong>数据从发送端到接收端的时间</strong>，分为4类：</p>
<ul>
<li><strong>传播时延</strong>：信号在介质中传输的时间（如光纤中光的传播速度）；</li>
<li><strong>传输时延</strong>：数据全部发出的时间（如 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mtext>MB</mtext></mrow><annotation encoding="application/x-tex">100 \text{MB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">100</span><span class="mord text"><span class="mord">MB</span></span></span></span></span> 数据用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mtext>Mbps</mtext></mrow><annotation encoding="application/x-tex">100 \text{Mbps}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">100</span><span class="mord text"><span class="mord">Mbps</span></span></span></span></span> 速率传，传输时延= <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mn>100</mn><mo>×</mo><mn>8</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup></mrow><mrow><mn>100</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup></mrow></mfrac><mo>=</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">\frac{100 \times 8 \times 10^6}{100 \times 10^6} = 8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4213em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0179em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">100</span><span class="mbin mtight">×</span><span class="mord mtight">1</span><span class="mord mtight"><span class="mord mtight">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">100</span><span class="mbin mtight">×</span><span class="mord mtight">8</span><span class="mbin mtight">×</span><span class="mord mtight">1</span><span class="mord mtight"><span class="mord mtight">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span></span></span></span> 秒）；</li>
<li><strong>处理时延</strong>：设备（如路由器）处理数据的时间；</li>
<li><strong>排队时延</strong>：数据在设备缓存中等待的时间（网络拥堵时排队时延会增加）；</li>
</ul>
</li>
<li>
<p><em><strong>丢包率</strong></em>：<strong>传输过程中丢失的数据包占总数据包的比例</strong>，丢包率高会导致视频卡顿、文件传输失败（正常网络丢包率应低于1%）；</p>
</li>
<li>
<p><em><strong>吞吐量</strong></em>：<strong>实际传输的有效数据量</strong>（排除协议开销），比如 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mtext>Mbps</mtext></mrow><annotation encoding="application/x-tex">100 \text{Mbps}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">100</span><span class="mord text"><span class="mord">Mbps</span></span></span></span></span> 带宽的吞吐量可能只有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>80</mn><mtext>Mbps</mtext></mrow><annotation encoding="application/x-tex">80 \text{Mbps}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">80</span><span class="mord text"><span class="mord">Mbps</span></span></span></span></span>（因为要传TCP/IP头部信息）。</p>
</li>
</ol>
<hr>
<br/>
<h2 id="2-网络分层结构：为什么要分层？">2 网络分层结构：为什么要分层？</h2>
<p>如果让一台电脑直接给另一台电脑发数据，需要处理 “转电信号、加地址、选路径、保证可靠” 等很多任务——这样逻辑太复杂了，而且有一个模块出了问题也难排查😣。</p>
<p><strong>“分层”的思路就像“寄快递”</strong>：你（应用层）只需要把快递交给快递员（传输层），不用管快递怎么运到分拣中心（网络层）、怎么装车（数据链路层）、用什么交通工具（物理层）。每层只做自己的事，下层为上层提供服务，上层不用关心下层的细节。</p>
<p>目前主流的分层模型有两种：<strong>OSI七层模型</strong> 和 <strong>TCP/IP四层模型</strong>。</p>
<hr>
<h3 id="2-1-OSI-七层模型（理论模型）">2.1 OSI 七层模型（理论模型）</h3>
<p>OSI（开放式系统互联）是国际标准化组织（ISO）提出的理论模型，分为7层，从下到上依次是：</p>
<p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>1. 物理层</mtext><mo>→</mo><mtext>2. 数据链路层</mtext><mo>→</mo><mtext>3. 网络层</mtext><mo>→</mo><mtext>4. 传输层</mtext><mo>→</mo><mtext>5. 会话层</mtext><mo>→</mo><mtext>6. 表示层</mtext><mo>→</mo><mtext>7. 应用层</mtext></mrow><annotation encoding="application/x-tex">\text{1. 物理层} \rightarrow \text{2. 数据链路层} \rightarrow \text{3. 网络层}  \rightarrow \text{4. 传输层}  \rightarrow \text{5. 会话层}  \rightarrow \text{6. 表示层} \rightarrow \text{7. 应用层}    
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord">1. </span><span class="mord cjk_fallback">物理层</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord">2. </span><span class="mord cjk_fallback">数据链路层</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord">3. </span><span class="mord cjk_fallback">网络层</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord">4. </span><span class="mord cjk_fallback">传输层</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord">5. </span><span class="mord cjk_fallback">会话层</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord">6. </span><span class="mord cjk_fallback">表示层</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord">7. </span><span class="mord cjk_fallback">应用层</span></span></span></span></span></span></p>
<p><strong>每层的核心作用</strong>：</p>
<ul>
<li>下三层（1-3）：负责“数据传输”，处理硬件相关的工作（如信号、地址、路径）；</li>
<li>上四层（4-7）：负责“数据处理”，处理软件相关的工作（如可靠传输、会话管理、应用服务）。</li>
</ul>
<p>但 OSI 模型太复杂（比如会话层和表示层功能重叠），实际中几乎没人用，仅作为理论参考。</p>
<hr>
<h3 id="2-2-TCP-IP-四层模型（实际模型）">2.2 TCP/IP 四层模型（实际模型）</h3>
<p>TCP/IP 是互联网的“事实标准”，由美国国防部提出，更简洁实用，分为4层（也常被扩展为5层，将网络接口层分为数据链路层和物理层）。</p>
<table>
<thead>
<tr>
<th>TCP/IP四层模型</th>
<th>对应OSI七层模型</th>
<th>核心作用</th>
<th>典型协议/设备</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>应用层</strong></td>
<td>应用层+表示层+会话层</td>
<td>为应用程序提供服务</td>
<td>HTTP、DNS、FTP</td>
</tr>
<tr>
<td><strong>传输层</strong></td>
<td>传输层</td>
<td>端到端可靠传输、流量控制</td>
<td>TCP、UDP</td>
</tr>
<tr>
<td><strong>网际层（网络层）</strong></td>
<td>网络层</td>
<td>路由选择、IP寻址</td>
<td>IP、ARP、路由器</td>
</tr>
<tr>
<td><strong>网络接口层</strong></td>
<td>数据链路层+物理层</td>
<td>MAC寻址、信号转换</td>
<td>MAC、交换机、网线</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="2-3-发送消息的完整流程：从“封装”到“解封装”">2.3 发送消息的完整流程：从“封装”到“解封装”</h3>
<p>以 “电脑A给电脑B发一条消息” 为例，解析数据在分层模型中怎么传输。核心是 “自上而下封装，自下而上解封装”。</p>
<ul>
<li>
<p><em><strong>发送端（电脑A）：自上而下“封装”</strong></em></p>
<ul>
<li><strong>应用层</strong>：应用（例如 QQ）将消息（如“你好”）处理成“应用层数据”，加上HTTP/QQ自定义协议的“头部”（记录消息类型、发送时间）；</li>
<li><strong>传输层</strong>：接收应用层的数据，<strong>加上 TCP 头部</strong>（记录源端口，比如QQ的端口号；目的端口，比如电脑B QQ的端口号），形成“段（Segment）”；</li>
<li><strong>网络层</strong>：接收传输层的段，<strong>加上 IP 头部</strong>（记录源IP，比如A的  IP <code>192.168.1.2</code>；目的IP，比如B的 IP <code>192.168.1.3</code>），形成“数据包（Packet）”；</li>
<li><strong>数据链路层</strong>：接收网络层的数据包，<strong>加上MAC头部</strong>（记录A的 MAC 地址；B的 MAC 地址）和尾部（校验信息），形成“帧（Frame）”；</li>
<li><strong>物理层</strong>：将帧转换成电信号/光信号，通过网线/光纤传输。</li>
</ul>
</li>
<li>
<p><em><strong>接收端（电脑B）：自下而上“解封装”</strong></em></p>
<ul>
<li><strong>物理层</strong>：接收电信号，转换成帧，传给数据链路层；</li>
<li><strong>数据链路层</strong>：验证尾部的校验信息，<strong>去掉 MAC 头部和尾部</strong>，将数据包传给网络层；</li>
<li><strong>网络层</strong>：验证 IP 头部，<strong>去掉 IP 头部</strong>，将段传给传输层；</li>
<li><strong>传输层</strong>：验证 TCP 头部，<strong>去掉 TCP 头部</strong>，将应用层数据传给应用层；</li>
<li><strong>应用层</strong>：QQ 接收数据，解析后显示“你好”。</li>
</ul>
</li>
</ul>
<p><img src="https://sukicdn.com/wyx/i/2025/09/23/1892x.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt="发送消息-接收消息完整流程"></p>
<p>总结：<strong>发送端每层加“头部”（包装），接收端每层拆“头部”（拆包）</strong>，每层只处理自己加的头部信息，互不干扰。</p>
<hr>
<br/>
<h2 id="3-物理层：网络的物理基础">3 物理层：网络的物理基础</h2>
<p>物理层是网络的最底层，负责 <strong>将数据转换成物理信号</strong> 并传输，不关心数据的含义——就像快递的交通工具（卡车、飞机），只负责运货，不管货里装的是什么😋。</p>
<p>物理层的核心设备是 <strong>中继器</strong> 和 <strong>集线器</strong>。</p>
<hr>
<h3 id="3-1-中继器：信号的放大器">3.1 中继器：信号的放大器</h3>
<p>信号在传输介质中会衰减（比如网线超过 100 米，信号就会弱到无法识别），中继器的作用就是 <strong>放大信号</strong>，<strong>延长传输距离</strong>。</p>
<ul>
<li><strong>工作原理</strong>：接收衰减的信号，还原信号的波形和幅度，再发送出去；</li>
<li><strong>特点</strong>：
<ul>
<li>仅工作在物理层，只处理信号，不理解数据内容；</li>
<li>只能连接同类型的传输介质（如网线中继器不能连光纤）；</li>
<li>不能隔离“冲突域”（多台设备同时发数据会冲突），现在很少单独使用。</li>
</ul>
</li>
</ul>
<hr>
<p>在日常生活中，WiFi 中继器（又称 WiFi 扩展器）是最常用的中继器类型，核心解决 “家庭 / 小空间 WiFi 覆盖死角” 的问题。多数家庭的 WiFi 主路由会放在客厅（方便接宽带），但卧室、阳台、卫生间等 “角落区域” 信号弱。</p>
<p>把 WiFi 中继器插在客厅与卧室之间的 “过渡区域”（比如走廊插座、客厅靠近卧室的边柜插座），让中继器能稳定接收到客厅主路由的强信号，再通过中继器把信号 “放大延伸” 到卧室。</p>
<hr>
<h3 id="3-2-集线器（Hub）：多端口的“中继器”">3.2 集线器（Hub）：多端口的“中继器”</h3>
<p>集线器就是“多端口的中继器”，可以将多个设备连接到同一个网络。</p>
<h4 id="3-2-1-什么是集线器">3.2.1 什么是集线器</h4>
<p><strong>集线器（Hub）</strong> 是一种简单的网络设备，有多个端口（常见4口、8口、16口），每个端口可以连接一台电脑或其他设备。⭐</p>
<p><img src="https://sukicdn.com/wyx/i/2025/09/24/32w.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt="集线器模型"></p>
<h4 id="3-2-2-集线器的工作模式：半双工">3.2.2 集线器的工作模式：半双工</h4>
<p>集线器的所有端口共享同一带宽，且工作在 <strong>半双工模式</strong> —— 同一时间，一个端口只能发数据或收数据，不能同时进行。</p>
<p>为了避免多台设备同时发数据导致冲突，集线器会使用 <strong>CSMA/CD协议</strong>（载波监听多点接入/碰撞检测）：</p>
<ol>
<li>设备发数据前，<strong>先监听线路是否空闲</strong>；</li>
<li><strong>如果空闲，就发数据；如果忙，就等待</strong>；</li>
<li>发数据时 <strong>如果检测到冲突</strong>（比如两台设备同时发），就 <strong>立即停止发送</strong>，并发送“冲突信号”，让其他设备知道有冲突；</li>
<li><strong>所有设备等待随机时间后，再重新尝试发送</strong>。</li>
</ol>
<h4 id="3-2-3-集线器的特点：已被淘汰的“老古董”">3.2.3 集线器的特点：已被淘汰的“老古董”</h4>
<p>集线器的缺点非常明显，现在几乎被交换机取代：</p>
<ul>
<li><strong>共享带宽</strong>：比如 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn></mrow><annotation encoding="application/x-tex">8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span></span></span></span> 口集线器，总带宽 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>100Mbps</mtext></mrow><annotation encoding="application/x-tex">\text{100Mbps}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">100Mbps</span></span></span></span></span>，每台设备平均只有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>12.5Mbps</mtext></mrow><annotation encoding="application/x-tex">\text{12.5Mbps}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">12.5Mbps</span></span></span></span></span>；</li>
<li><strong>所有端口在一个冲突域</strong>：一台设备发数据，<strong>所有端口都能收到</strong>（广播），不仅效率低，还不安全（别人能截获数据）😋；</li>
<li><strong>半双工模式</strong>：无法同时收发数据，延迟高；</li>
<li><strong>无智能转发</strong>：不管目的地址，一律广播，浪费带宽。</li>
</ul>
<p><img src="https://sukicdn.com/wyx/i/2025/09/24/4ptc.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt="集线器缺点：所有端口在一个冲突域"></p>
<blockquote>
<p>图片来源：<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1813700">硬核图解！30张图带你搞懂！路由器，集线器，交换机，网桥，光猫有啥区别？</a></p>
</blockquote>
<hr>
<br/>
<h2 id="4-数据链路层：给数据“加MAC地址”">4 数据链路层：给数据“加MAC地址”</h2>
<p>物理层 <strong>解决了信号传输</strong>，但 <strong>不知道“数据要发给谁”</strong>——数据链路层的核心作用就是“<strong>给数据加MAC地址</strong>”，实现设备到设备的精准通信。</p>
<p>数据链路层的核心设备是 <strong>网桥</strong> 和 <strong>交换机</strong>。</p>
<hr>
<h3 id="4-1-MAC-地址：“网络身份证号”">4.1 MAC 地址：“网络身份证号”</h3>
<p><strong>MAC 地址</strong>（Media Access Control Address，媒体访问控制地址），也称为 <strong>物理地址</strong> 或 <strong>硬件地址</strong>，是分配给网络设备（如电脑网卡、手机、路由器、打印机等）网络接口控制器（NIC）的 <strong>唯一标识符</strong>。</p>
<p>它就像你设备的“<strong>网络身份证号</strong>”，用于在局域网（如家庭、公司内部网络）中唯一识别每一台设备。</p>
<p><strong>MAC 地址的核心特点：</strong></p>
<ol>
<li>
<p><strong>唯一性</strong>：</p>
<ul>
<li>理论上，全球每个网络接口的 MAC 地址都是<strong>独一无二</strong>的（由设备制造商烧录在硬件中）。</li>
<li>地址由 IEEE（电气和电子工程师协会）管理和分配给制造商，前半部分标识厂商（OUI - 组织唯一标识符），后半部分由厂商自行分配。</li>
</ul>
</li>
<li>
<p><strong>格式</strong>：</p>
<ul>
<li>通常由 <strong>12 个十六进制数字</strong>（0-9, A-F）组成。</li>
<li>常见的表示方式是用冒号 <code>:</code> 或连字符 <code>-</code> 分隔成 6 组，例如：
<ul>
<li><code>00:1A:C2:7B:00:47</code></li>
<li><code>00-1A-C2-7B-00-47</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>层级</strong>：</p>
<ul>
<li>工作在 <strong>OSI 模型的第二层——数据链路层</strong>。</li>
<li>主要用于 <strong>局域网</strong> 内的设备间通信。当数据包在同一个网络（如你的家庭 WiFi）内传输时，交换机等设备依靠 MAC 地址来确定数据应该发送给哪台具体的设备。</li>
</ul>
</li>
<li>
<p><strong>与 IP 地址的区别</strong>：</p>
<ul>
<li><strong>MAC 地址</strong>：是 <strong>物理的、硬件层面</strong> 的地址，通常固定不变（虽然可以软件修改，称为“MAC 地址欺骗”），用于 <strong>本地网络</strong> 寻址。</li>
<li><strong><a href="#5-%E7%BD%91%E7%BB%9C%E5%B1%82%E5%AE%9E%E7%8E%B0%E8%B7%A8%E7%BD%91%E6%AE%B5%E9%80%9A%E4%BF%A1">IP 地址</a></strong>：是 <strong>逻辑的、软件层面</strong> 的地址，可以动态分配（如 DHCP）或手动设置，用于在 <strong>互联网或不同网络</strong> 之间进行路由和寻址。</li>
<li><strong>类比</strong>：可以把 MAC 地址想象成你的“身份证号”（唯一且相对固定），IP 地址想象成你的“邮寄地址”（可能变化，用于定位你在哪个区域）。</li>
</ul>
</li>
<li>
<p><strong>主要用途</strong>：</p>
<ul>
<li><strong>局域网内设备识别与通信</strong>：交换机通过 MAC 地址表来转发数据帧到正确的端口。</li>
<li><strong>网络访问控制</strong>：一些路由器或企业网络会设置 MAC 地址过滤，只允许特定设备接入。</li>
<li><strong><a href="#5-%E7%BD%91%E7%BB%9C%E5%B1%82%E5%AE%9E%E7%8E%B0%E8%B7%A8%E7%BD%91%E6%AE%B5%E9%80%9A%E4%BF%A1">DHCP 分配</a></strong>：DHCP 服务器有时会根据设备的 MAC 地址为其分配固定的 IP 地址（IP-MAC 绑定）。</li>
<li><strong>设备追踪</strong>（在特定环境下）：例如，在大型商场或机场的 WiFi 中，可以通过 MAC 地址大致追踪设备的移动轨迹（出于隐私考虑，现代操作系统如 iOS 和 Android 默认会使用随机 MAC 地址连接 WiFi）。</li>
</ul>
</li>
</ol>
<hr>
<h3 id="4-2-网桥：连接两个局域网的“过滤器”">4.2 网桥：连接两个局域网的“过滤器”</h3>
<p><strong>网桥（Bridge）</strong> 工作在数据链路层，用于连接两个不同的局域网（比如两个办公室的LAN），并根据 MAC 地址“过滤帧”——只把需要跨网段传输的帧转发过去，减少不必要的广播。</p>
<ul>
<li>
<p><em><strong>工作原理</strong></em>：</p>
<ol>
<li>网桥有两个端口，分别连接两个 LAN；</li>
<li><strong>学习</strong>：收到帧时，记录“源 MAC 地址”和对应的端口（比如 LAN1 的设备 MAC 都存在端口 1）；</li>
<li><strong>转发</strong>：收到帧后，查看“目的 MAC 地址”，如果在另一个 LAN，就转发；如果在同一个 LAN，就丢弃（不转发）；</li>
</ol>
</li>
<li>
<p><em><strong>特点</strong></em>：</p>
<ul>
<li><strong>隔离冲突域</strong>：两个 LAN 分别是一个冲突域，减少冲突；</li>
<li><strong>不能隔离广播域</strong>：如果收到广播帧（比如 ARP 请求），还是会转发到另一个 LAN；</li>
<li><strong>端口少</strong>：通常只有 2 个端口，现在被多端口的交换机取代。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="4-3-交换机（Switch）：多端口的“智能网桥”">4.3 交换机（Switch）：多端口的“智能网桥”</h3>
<p><strong>交换机</strong> 是数据链路层的核心设备，<strong>相当于“多端口的网桥”</strong>，更智能、更快，是现在局域网的核心连接设备（比如家庭的千兆交换机、公司的核心交换机）。</p>
<h4 id="4-3-1-什么是交换机">4.3.1 什么是交换机</h4>
<p><strong>交换机（Ethernet Switch）</strong> 有多个端口（常见 8口、16口、24口、48口），每个端口可以连接电脑、服务器、打印机等设备，<strong>能根据 MAC 地址“定向转发”数据</strong>，而不是像集线器那样广播。</p>
<h4 id="4-3-2-交换机的工作模式：全双工">4.3.2 交换机的工作模式：全双工</h4>
<p>交换机的每个端口都是 <strong>全双工模式</strong> —— 同一时间，<strong>一个端口可以同时发数据和收数据</strong>。因为每个端口独占带宽（比如 24口千兆交换机，每个端口都是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>1000Mbps</mtext></mrow><annotation encoding="application/x-tex">\text{1000Mbps}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">1000Mbps</span></span></span></span></span> 带宽）。</p>
<p>全双工模式下，不需要 CSMA/CD 协议 —— 因为每个端口的发送和接收链路是分开的，不会冲突。</p>
<h4 id="4-3-3-交换机的核心特点">4.3.3 交换机的核心特点</h4>
<ul>
<li><strong>每个端口一个冲突域</strong>：设备之间通信互不干扰，冲突率极低；</li>
<li><strong>基于MAC地址定向转发</strong>：不是广播（除了未知MAC地址），效率高；</li>
<li><strong>全双工通信</strong>：速率快，延迟低；</li>
<li><strong>支持VLAN（虚拟局域网）</strong>：可以将一个交换机分成多个“虚拟网段”，隔离广播域（后续进阶内容）。</li>
</ul>
<h4 id="4-3-4-交换机和集线器的核心对比">4.3.4 交换机和集线器的核心对比</h4>
<p><strong>交换机和集线器两者差异</strong>：</p>
<table>
<thead>
<tr>
<th>对比维度</th>
<th>集线器（Hub）</th>
<th>交换机（Switch）</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>工作层级</strong></td>
<td>物理层</td>
<td>数据链路层</td>
</tr>
<tr>
<td><strong>冲突域</strong></td>
<td>所有端口共享一个冲突域</td>
<td>每个端口一个冲突域</td>
</tr>
<tr>
<td><strong>带宽分配</strong></td>
<td>共享带宽（如8口100Mbps，每口12.5Mbps）</td>
<td>独占带宽（每口都是100Mbps）</td>
</tr>
<tr>
<td><strong>工作模式</strong></td>
<td>半双工（不能同时收发）</td>
<td>全双工（可同时收发）</td>
</tr>
<tr>
<td><strong>转发依据</strong></td>
<td>无（广播所有数据）</td>
<td>MAC 地址（定向转发）</td>
</tr>
<tr>
<td><strong>安全性</strong></td>
<td>低（所有设备能收到数据）</td>
<td>高（仅目的设备能收到数据）</td>
</tr>
<tr>
<td><strong>适用场景</strong></td>
<td>早期小网络（已淘汰）</td>
<td>家庭、企业局域网（主流）</td>
</tr>
</tbody>
</table>
<h4 id="4-3-5-MAC-地址表：交换机的“通讯录”">4.3.5 MAC 地址表：交换机的“通讯录”</h4>
<p>交换机之所以能定向转发，靠的是内部的 <strong>MAC地址表</strong>（也叫“CAM表”）——记录了“MAC地址”和“对应端口”的映射关系，就像我们手机里的通讯录（名字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">→</span></span></span></span> 手机号）。</p>
<p><strong>MAC 地址表的工作流程</strong>：</p>
<ol>
<li><strong>初始化</strong>：刚通电时，MAC地址表是空的；</li>
<li><strong>学习</strong>：比如电脑A（MAC-A）通过端口1给电脑B（MAC-B）发数据，交换机收到帧后，会把“MAC-A <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">→</span></span></span></span> 端口1”记录到表中；</li>
<li><strong>转发</strong>：交换机查看帧的目的MAC（MAC-B），如果表中有MAC-B对应的端口（比如端口2），就直接转发到端口2；如果没有（未知MAC），就广播到所有端口（除了入端口）；</li>
<li><strong>老化</strong>：如果某个MAC地址长时间（比如5分钟）没有数据传输，交换机会删除该条目，避免表过大。</li>
</ol>
<p><strong>举个例子</strong>：第一次A给B发数据，交换机广播；B收到后回复A，交换机学习到“MAC-B <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">→</span></span></span></span> 端口2”；之后A再给B发数据，交换机就直接转发到端口2，不再广播。</p>
<p><img src="https://sukicdn.com/wyx/i/2025/09/24/3gn.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt="交换机和MAC地址表"></p>
<blockquote>
<p>图片来源：<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1813700">硬核图解！30张图带你搞懂！路由器，集线器，交换机，网桥，光猫有啥区别？</a></p>
</blockquote>
<hr>
<br/>
<h2 id="5-网络层：实现“跨网段通信”">5 网络层：实现“跨网段通信”</h2>
<p>数据链路层解决了同一局域网内的设备通信（比如 <code>192.168.1.2</code> 给 <code>192.168.1.3</code> 发数据），但 <strong>如果要跨网段通信</strong>（比如 <code>192.168.1.2</code> 给 <code>192.168.2.3</code> 发数据），就需要网络层。</p>
<p>网络层的核心是“<strong>IP地址</strong>”和“<strong>路由器</strong>”。</p>
<hr>
<h3 id="5-1-网络层的功能和服务">5.1 网络层的功能和服务</h3>
<p>网络层的核心目标是“实现跨网段的分组转发”，主要功能如下：</p>
<ol>
<li><strong>IP寻址</strong>：给每个设备分配唯一的IP地址（如 <code>192.168.1.2</code>），确定数据的“源地址”和“目的地址”；</li>
<li><strong>路由选择</strong>：在多个网段之间选择最优路径（比如从北京到上海，选联通还是电信的链路）；</li>
<li><strong>分组转发</strong>：根据路由表，将数据包转发到下一个设备（比如路由器）；</li>
<li><strong>拥塞控制</strong>：当网络拥堵时，减少数据包发送，避免丢包（如TCP的拥塞控制）。</li>
</ol>
<p>网络层提供的服务是 <strong>面向无连接的</strong>（以IP协议为例）：</p>
<ul>
<li><strong>无连接</strong>：发送数据包前不需要建立连接，直接发送；</li>
<li><strong>不可靠</strong>：不保证数据包一定能到达，丢包后不重发（重发由传输层的TCP负责）；</li>
<li><strong>无顺序</strong>：数据包到达接收端的顺序可能和发送顺序不一致（需要TCP排序）。</li>
</ul>
<hr>
<h3 id="5-2-IP-协议（网际协议）">5.2 IP 协议（网际协议）</h3>
<p>在讲 IP 协议前，先搞懂 “IP 地址” 本身 —— 它是网络层的核心 “定位工具”，没有 IP 地址，跨网段通信就像 “寄快递没有收件人地址”，数据根本找不到目的地。</p>
<h4 id="5-2-1-什么是-IP-地址">5.2.1 什么是 IP 地址</h4>
<p><strong>IP 地址</strong>（Internet Protocol Address）是分配给网络中每台设备的  <strong>逻辑地址</strong>，相当于设备在网络中的 “居住地址”，格式为  <strong>点分十进制</strong>（如 <code>192.168.1.2</code>），由 <strong>32 位二进制数</strong> 组成（对应 <strong>IPv4</strong>，也是日常最常用的版本）。​</p>
<p>前面提到的 <code>192.168.1.2</code> 就是一个 IP，同一个局域网内还可能会有一个IP是 <code>192.168.1.200</code>。它们都是 <code>192.168.1.xxx</code>，<strong>都处于 <code>192.168.1.0</code> 这一个网段中</strong>。</p>
<p>具体来说，把 <code>192.168.1.2</code> 翻译成 “网络地址”，就是 <code>C 类私有网段.168细分段.1号局域网.2号设备</code></p>
<p>举个通俗的例子：<br>
​<br>
<em>类似于 <code>南京市.玄武区.孝陵卫街道.200号</code> 这样一个地址，我们可以根据这个 ``南京市.玄武区.孝陵卫街道` 地址到达这个地区（局域网段），然后再定位到 200 门牌号这个具体位置。</em></p>
<hr>
<p>IP 地址和数据链路层的 “MAC 地址”（设备硬件自带的物理地址，如 XX:XX:XX:XX:XX:XX）是不同的：</p>
<ul>
<li><strong>MAC 地址是 硬件地址</strong>，像设备的 “身份证号”，出厂后固定不变；​</li>
<li><strong>IP 地址是 逻辑地址</strong>，像设备的 “临时居住地址”，可以手动修改或由 DHCP 自动分配（比如手机连不同 WiFi，IP 地址会变）；​</li>
<li>跨网段通信时，数据靠 IP 地址 “找大方向”（比如从 <code>192.168.1.0</code> 网段到 <code>192.168.2.0</code> 网段），到了目标网段后，再靠 MAC 地址 “找具体设备”（这就是 ARP 协议的作用）。</li>
</ul>
<hr>
<h4 id="5-2-2-为什么需要-IP-地址？">5.2.2 为什么需要 IP 地址？</h4>
<p>核心原因是解决 <strong>跨网段定位设备</strong> 的问题 —— 没有 IP 地址，数据只能在同一局域网内 “瞎逛”，无法跨网段传递。</p>
<p>以 “快递运输” 类比：​</p>
<p><em>同一局域网（如家庭 WiFi）内的设备通信，就像 “同一栋楼里的邻居递东西”：只需要知道对方的 “门牌号后几位”，直接递过去就行；​</em></p>
<p><em>跨网段通信（如家庭内网连互联网、公司南京分公司连杭州分公司），就像 “从南京寄快递到杭州”：只知道对方的 “门牌号后几位”没用，说不定门牌号都一样🤔，所以必须知道 “省 + 市 + 区 + 街道”（IP 地址），快递员（路由器）才能按地址把包裹（数据）送到目标区域，再找具体门牌号。​</em></p>
<p>接下来以 “从上海寄一封信到 <code>南京市.玄武区.孝陵卫街道.200号</code>，类比 “从公司电脑（IP：<code>10.0.2.3</code>）给家里的手机（IP：<code>192.168.1.200</code>）传文件”。⭐</p>
<ol>
<li>
<p><strong>“大方向定位”</strong>—— 靠地址的前 3 层（对应 IP 的前 3 段）​</p>
<p><em><strong>现实场景</strong></em>：​</p>
<p>上海的快递员（对应公司路由器）拿到快递单，先看 <code>南京市.玄武区.孝陵卫街道</code> —— 这 3 层告诉快递员：“不用在上海找，先把快递送到南京玄武区的孝陵卫街道片区（目标小区域）”，至于具体 200 号，等到了孝陵卫街道再找。<br>
​<br>
<em><strong>网络场景</strong></em>：​</p>
<p>公司电脑发数据时，路由器先看目标 IP <code>192.168.1.2</code> 的前 3 段 <code>192.168.1</code> —— 这 3 段告诉路由器：“不用在公司的 <code>10.0.2.0</code> 网段找，先把数据传到家里的 <code>192.168.1.0</code> 网段（目标局域网）”，至于具体是 <code>192.168.1.200</code> 这个设备，等数据到了家里的网段再确定。​</p>
<p><em><strong>核心</strong></em>：地址前 3 层（IP 前 3 段）负责 “跨区域找目标网段”，就像快递先到 “目标街道”，数据先到 “目标局域网”。</p>
</li>
<li>
<p><strong>“具体定位”</strong>—— 靠地址的第 4 层（对应 IP 的第 4 段）</p>
<p><em><strong>现实场景</strong></em>：​</p>
<p>快递到了孝陵卫街道后，当地快递员（对应家里的路由器 / 交换机）再看第 4 层 “200 号”—— 这一层是 “街道内的具体门牌号”，直接找到 200 号住户，把快递送到手上。​</p>
<p><em><strong>网络场景</strong></em>：​</p>
<p>数据到了家里的 <code>192.168.1.0</code> 网段后，家里的交换机（对应街道快递员）再看 IP 的第 4 段 “2”—— 这一层是 “网段内的具体设备号”，直接把数据传给 <code>192.168.1.200</code> 的手机（对应 200 号住户）。​</p>
<p><em><strong>核心</strong></em>：地址第 4 层（IP 第 4 段）负责 “网段内找具体设备”，就像快递到街道后找 “具体门牌号”，数据到网段后找 “具体设备”。</p>
</li>
</ol>
<p>简单说：MAC 地址解决 “局域网内找设备”，IP 地址解决 “跨网段找区域”，两者配合才能实现全局通信。</p>
<p>有了网段，就可以一次性表示一大批地址。不需要像交换机的一条一条MAC地址记录在表里（一张表里存巨多 MAC 地址也不现实）。</p>
<hr>
<h4 id="5-2-3-“公有-IP”-和-“私有-IP”">5.2.3 “公有 IP” 和 “私有 IP”</h4>
<p>家里的路由器、公司的内网设备，IP 地址几乎都是 <code>192.168.1.XX</code> 或 <code>192.168.0.XX</code>，核心原因是：<strong>192.168. 开头的 IP 属于 “私有 IP 地址” —— 专门给局域网内部使用，不占用公网资源</strong>。</p>
<p>要理解这一点，先区分 “公有 IP” 和 “私有 IP”：</p>
<ul>
<li>
<p><strong>公有 IP 地址</strong>：由运营商（如移动、联通）分配的 “公网地址”，像 “城市的公共街道地址”，可以在互联网上直接被访问（比如 <code>180.101.49.12</code> 是公有 IP）；</p>
</li>
<li>
<p><strong>私有 IP 地址</strong>：由 IANA（互联网地址分配机构）规定的 “局域网专用地址”，<strong>像 “小区内部的楼号门牌号”，只能在局域网内使用</strong>，无法直接被互联网访问（需要通过路由器的 NAT 功能，把私有 IP 转换成公有 IP 才能上网）。</p>
</li>
</ul>
<p><em>公有 IP 就好比 对外可查的 “真实物理地址”。</em></p>
<ul>
<li>现实中，这个地址是 “公开可定位” 的 —— 无论从上海、北京还是外地，只要写对这个地址，快递都能找到。</li>
<li>网络中：公有 IP（例如 180.101.49.12）也是 “公开可访问的”—— 无论你在哪个城市的网络，只要输入这个 IP，都能连接，因为它属于 “互联网公开的 IP 体系”，由运营商分配。</li>
</ul>
<p><em>私有 IP 就好比 小区内部的 “虚拟门牌号”。</em></p>
<ul>
<li>现实中：“233 号楼 甲 单元 101” 只能在 XX 小区内部用 —— 如果只写 “233 号楼 甲 单元 101”，外地快递根本找不到（不知道在哪个城市、哪个街道），必须加上 “南京市.玄武区.孝陵卫街道 XX 小区”（对应路由器的公有 IP），才能对外通信。</li>
<li>网络中：<code>192.168.1.2</code> 这类私有 IP 也只能在 “家庭 / 公司内网” 用 —— 如果只给数据写 <code>192.168.1.2</code>，互联网上的路由器根本不知道要传到哪个 “公网区域”，必须通过家里路由器的 “NAT 转换”（把私有 IP 转换成公有 IP），才能连互联网。</li>
</ul>
<p>总的来说：<strong>私有 IP 是 “局域网内的小地址”，必须结合 “公有 IP（大地址）” 才能对外通信</strong>，就像小区内部门牌号必须结合 “城市街道地址” 才能收外地快递。</p>
<hr>
<p><strong>那么，MAC 地址呢？</strong> 😋</p>
<p><em>MAC 地址 就好比 “房子的房产证号”</em></p>
<p>MAC 地址 = 房子的 “房产证编号”（如 <code>苏 A2023XXXX</code>）—— 这是房子的 “唯一硬件标识”，从房子建好就固定不变（对应设备出厂时的 MAC 地址，终身不变）。</p>
<p>IP 地址 = 房子的 “门牌号”（如 <code>南京市.玄武区.孝陵卫街道.200 号</code>）—— 这是房子的 “使用地址”，如果房子出租、出售，门牌号可能不变，但如果房子拆迁搬到别的街道，门牌号就变了（对应设备连不同 WiFi，IP 地址会变）。</p>
<p>总的来说：<strong>MAC 地址是 “设备的身份证”（固定），IP 地址是 “设备的居住地址”（可改）</strong></p>
<hr>
<p><code>192.168.</code> 开头的 IP，是 <strong>C 类私有 IP 地址的核心段</strong>，具体范围是 <code>192.168.0.0</code> ~ <code>192.168.255.255</code>，特点是：</p>
<ol>
<li>
<p><strong>适合小型局域网</strong>：每个 <code>192.168.X.0</code> 网段（如 <code>192.168.1.0</code>）<strong>最多能容纳 254 台设备</strong>（IP 从 <code>192.168.1.1</code> 到 <code>192.168.1.254</code>），刚好满足家庭（几台手机 + 电脑 + 电视）、小公司（几十台设备）的需求；</p>
</li>
<li>
<p><strong>默认配置方便</strong>：路由器厂商（如华为、TP-Link）默认把内网 IP 设为 <code>192.168.1.1</code> 或 <code>192.168.0.1</code>，用户不用手动配置，插电就能用；</p>
</li>
<li>
<p><strong>不冲突</strong>：因为私有 IP 只在局域网内有效，哪怕全世界千万个家庭都用 <code>192.168.1.2</code>，也不会互相干扰（就像 “3 号楼 2 单元 501” 在不同小区里可以重复）。</p>
</li>
</ol>
<hr>
<h4 id="5-2-4-还有哪些常用的-IP-地址开头？">5.2.4 还有哪些常用的 IP 地址开头？</h4>
<p>除了 <code>192.168.</code> 段，IANA 还规定了另外两类私有 IP 地址，分别适合中型、大型局域网，日常在企业、学校等场景中很常见：</p>
<table>
<thead>
<tr>
<th>私有 IP 类别</th>
<th>地址范围</th>
<th>常用开头</th>
<th>适用场景</th>
<th>特点（单网段最大设备数）</th>
</tr>
</thead>
<tbody>
<tr>
<td>A 类私有 IP</td>
<td><code>10.0.0.0</code> ~ <code>10.255.255.255</code></td>
<td><code>10.</code></td>
<td>大型企业、校园网、运营商内网</td>
<td>65534 台（网段范围极广）</td>
</tr>
<tr>
<td>B 类私有 IP</td>
<td><code>172.16.0.0</code> ~ <code>172.31.255.255</code></td>
<td><code>172.16.</code> ~ <code>172.31.</code></td>
<td>中型企业、园区网</td>
<td>65534 台（介于 A 类和 C 类之间）</td>
</tr>
<tr>
<td>C 类私有 IP</td>
<td><code>192.168.0.0</code> ~ <code>192.168.255.255</code></td>
<td><code>192.168.</code></td>
<td>家庭、小公司、SOHO 办公</td>
<td>254 台（小型场景够用）</td>
</tr>
</tbody>
</table>
<p>举几个日常能接触到的例子：</p>
<ul>
<li>学校校园网的 IP 可能是 <code>10.20.30.40</code>（A 类私有 IP，能覆盖全校几千台电脑、手机）；</li>
<li>中型公司的内网 IP 可能是 <code>172.18.5.6</code>（B 类私有 IP，适合几百台设备的部门使用）；</li>
<li>你家的智能电视 IP 可能是 <code>192.168.1.10</code>（C 类私有 IP，和手机、电脑在同一小网段）。</li>
</ul>
<p>这些私有 IP 的共同特点是：<strong>不能直接访问互联网</strong>，必须通过路由器的 “NAT 转换”，<strong>把私有 IP 换成运营商分配的公有 IP</strong>，才能浏览网页、刷视频 —— 这也是为什么你家所有设备连 WiFi 后，对外显示的都是同一个公有 IP 的原因。</p>
<p>打开终端输入 <code>ipconfig/all</code>（windows 系统），可以查看连接的无线网络信息：</p>
<p><img src="https://sukicdn.com/wyx/i/2025/09/24/x7iw.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt=""></p>
<hr>
<h4 id="5-2-5-IPv4-和-IPv6">5.2.5 IPv4 和 IPv6</h4>
<p>目前主流的IP协议有两个版本：</p>
<ul>
<li><strong>IPv4</strong>：32位地址，格式如 <code>192.168.1.2</code>，总共有2^32≈42亿个地址，已耗尽；</li>
<li><strong>IPv6</strong>：128位地址，格式如 <code>2001:0db8:85a3:0000:0000:8a2e:0370:7334</code>，总共有2^128个地址，足够未来几十年使用。</li>
</ul>
<p><strong>IP协议的核心作用</strong>：给数据包加IP头部（源IP、目的IP），让数据包能在跨网段中传输。</p>
<hr>
<h4 id="5-2-5-127-0-0-1-是什么">5.2.5 127.0.0.1 是什么</h4>
<p><code>127.0.0.1</code> 是一个特殊的 IPv4 地址，称为 <strong>本地回环地址</strong>。</p>
<ul>
<li>它是一个<strong>保留的地址块</strong>，整个 <code>127.0.0.0/8</code> 网段（从 <code>127.0.0.1</code> 到 <code>127.255.255.254</code>）都指向本机。最常用的是 <code>127.0.0.1</code>。</li>
<li>它有一个对应的<strong>主机名</strong>，叫做 <code>localhost</code>。在自己的电脑上，<code>ping localhost</code> 和 <code>ping 127.0.0.1</code> 的效果是完全一样的。</li>
</ul>
<p><strong>工作机制</strong>：</p>
<ul>
<li>当你的程序通过 <code>127.0.0.1</code> 发送网络数据时，操作系统内核的<strong>网络协议栈</strong>会直接处理这个数据包，而<strong>不会通过任何真实的物理或虚拟网络硬件</strong>（如网卡、Wi-Fi 适配器）发送出去。</li>
<li>数据包直接从“发送端”回环到本机的“接收端”。这个过程完全在操作系统内部完成，速度极快，且不依赖任何外部网络环境。</li>
</ul>
<p><strong><code>127.0.0.1</code> 的主要用途</strong> 🤔：</p>
<ol>
<li><strong>本地服务和开发测试</strong>：这是最重要的用途。当开发一个网络应用（如网站、数据库、游戏服务器）时，<strong>可以先在本地机器上同时运行客户端和服务器端进行测试</strong>，而无需依赖另一台电脑或复杂的网络配置。</li>
<li><strong>进程间通信（IPC）</strong>：两个或多个运行在同一台机器上的进程可以通过 TCP/IP 协议进行通信，就像它们在不同的机器上一样。这为构建分布式系统提供了统一的通信模型。</li>
<li><strong>访问本地主机服务</strong>：例如，在本机搭建了一个 Web 服务器（如 Apache 或 Nginx），就可以在浏览器中输入 <code>http://127.0.0.1</code> 或 <code>http://localhost</code> 来访问它。</li>
<li><strong>隔离与安全</strong>：一些服务可能只绑定到 <code>127.0.0.1</code>，这意味着只有本机上的程序可以访问它们，外部网络上的其他计算机无法连接，从而增加了安全性。</li>
</ol>
<hr>
<h3 id="5-3-ARP-协议（地址解析协议）">5.3 ARP 协议（地址解析协议）</h3>
<p>数据链路层需要 MAC 地址才能转发帧，但网络层用的是 IP 地址 ——ARP 协议的作用就是 “<strong>将 IP 地址转换成 MAC 地址</strong>”。</p>
<p>举个例子：A（<code>192.168.1.2</code>）要给同网段的 B（<code>192.168.1.3</code>）发数据，<strong>A 知道 B 的 IP，但不知道 MAC</strong>，流程如下：</p>
<p><strong>A 发送 ARP 广播帧</strong>：“谁是 <code>192.168.1.3</code>？请告诉我你的 MAC 地址”；<br>
同网段所有设备收到广播，只有 B（<code>192.168.1.3</code>）回复 ARP 响应：“我是 <code>192.168.1.3</code>，我的 MAC 是 XX:XX:XX:XX:XX:XX”；</p>
<p><strong>A 收到响应</strong>：将 “<code>192.168.1.3</code> → MAC-B” <strong>记录到 ARP 缓存表</strong>，之后通信就不用再发 ARP 请求了（缓存表老化时间约 10 分钟）。</p>
<p><img src="https://sukicdn.com/wyx/i/2025/09/24/3816.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt=""></p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/np/arp-protocol.html">ARP 的工作原理</a></p>
<hr>
<h3 id="5-4-RARP-协议（反向地址解析协议）">5.4 RARP 协议（反向地址解析协议）</h3>
<p>RARP 和 ARP 相反，是 “将 MAC 地址转换成 IP 地址”，主要用于无盘工作站（没有硬盘的电脑）：</p>
<ul>
<li>无盘工作站启动时，只知道自己的 MAC 地址，不知道 IP；</li>
<li>无盘工作站发送 RARP 广播：“我的 MAC 是 XX:XX:XX:XX:XX:XX，请告诉我我的 IP 地址”；</li>
<li>网络中的 RARP 服务器收到后，查询 MAC-IP 映射表，回复 IP 地址。</li>
</ul>
<p><strong>现在 RARP 已被 DHCP 协议取代</strong>。</p>
<hr>
<h3 id="5-5-DHCP-协议（动态主机配置协议）">5.5 DHCP 协议（动态主机配置协议）</h3>
<p>我们家里的电脑连 WiFi 时，不需要手动设置 IP 地址，就能自动获取 —— 这就是 DHCP 协议的作用：<strong>动态分配 IP 地址及相关配置</strong>（子网掩码、网关、DNS 服务器）。</p>
<p>DHCP 的工作流程（以电脑连路由器为例）：</p>
<ol>
<li>电脑启动后，发送 DHCP Discover 广播：“有没有 DHCP 服务器？我需要 IP 地址”；</li>
<li>路由器（内置 DHCP 服务器）收到后，发送 DHCP Offer：“我是 DHCP 服务器，给你分配 IP <code>192.168.1.100</code>，子网掩码 <code>255.255.255.0</code>”；</li>
<li>电脑收到 Offer 后，发送 DHCP Request 广播：“我接受这个 IP 地址”；</li>
<li>路由器发送 DHCP ACK：“确认，IP 地址租期为 24 小时”；</li>
<li><strong>电脑获得 IP 地址，租期快到前会申请续租</strong>。</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/np/dhcp-protocol.html">DHCP 的工作原理</a></p>
<hr>
<h3 id="5-6-ICMP-协议（互联网控制消息协议）">5.6 ICMP 协议（互联网控制消息协议）</h3>
<p>ICMP 协议用于 “在 IP 网络中传递控制消息”，比如报错、测试连通性。我们常用的 ping 命令，就是基于 ICMP 协议。</p>
<p><strong>ping 的工作流程</strong>：</p>
<ol>
<li>发送端（A）发送 ICMP Echo Request（回显请求）数据包，包含一定长度的数据；</li>
<li>接收端（B）收到后，发送 ICMP Echo Reply（回显响应）数据包，返回相同的数据；</li>
<li>如果 A 收到 Reply，说明 A 和 B 连通；如果超时，说明不通（可能是网络故障、防火墙拦截）。</li>
</ol>
<p>ICMP 还能返回错误信息，比如 “目标不可达”“超时”“源抑制（拥塞）” 等，帮助排查网络问题。</p>
<hr>
<h3 id="5-7-路由器（Router）：跨网段通信的-“网关”">5.7 路由器（Router）：跨网段通信的 “网关”</h3>
<p><strong>路由器</strong> 是网络层的核心设备，相当于 “<strong>网络之间的桥梁</strong>”—— 实现不同网段的通信（比如家庭内网 <code>192.168.1.0</code> 和公司内网 <code>192.168.2.0</code>），也是连接局域网和互联网的 “网关”。</p>
<hr>
<h4 id="5-7-1-路由器的主要功能">5.7.1 路由器的主要功能</h4>
<ol>
<li><strong>路由选择</strong>：这是路由器的核心功能——<strong>根据“路由表”选择最优路径</strong>，将数据包转发到下一个路由器；</li>
<li><strong>分组转发</strong>：收到数据包后，<strong>查看目的IP地址，匹配路由表</strong>，转发到下一跳；</li>
<li><strong>隔离广播域</strong>：每个端口对应一个网段，广播帧（如ARP请求）不会跨端口转发，减少广播风暴；</li>
<li><strong>网络地址转换（NAT）</strong>：<strong>将局域网的私有IP</strong>（如 <code>192.168.1.100</code>）<strong>转换成公网IP</strong>（如 <code>202.103.XX.XX</code>），实现多台设备共享一个公网 IP 上网（家庭路由器的核心功能）。</li>
</ol>
<hr>
<h4 id="5-7-2-路由表及其原理">5.7.2 路由表及其原理</h4>
<p><strong>路由器能选择路径，靠的是内部的路由表</strong> —— 记录了 “目的网络”“下一跳地址”“出接口”“度量值（路径优先级）” 等信息，就像 “地图上的路线”。</p>
<p><strong>路由表的条目生成方式</strong>：</p>
<ol>
<li>
<p><strong>静态路由</strong>：手动配置的路由条目（比如网络管理员手动添加“到 <code>192.168.2.0</code> 网段，下一跳是 <code>192.168.1.1</code> ”）；</p>
<ul>
<li><strong>优点</strong>：简单、可靠，适合小型网络；</li>
<li><strong>缺点</strong>：网络拓扑变化时需要手动修改，不适合大型网络。</li>
</ul>
</li>
<li>
<p><strong>动态路由</strong>：通过动态路由协议（如 RIP、OSPF、BGP）自动学习的路由条目；</p>
<ul>
<li><strong>优点</strong>：网络拓扑变化时自动更新路由表，适合大型网络（如互联网）；</li>
<li><strong>缺点</strong>：配置复杂，需要协议支持。</li>
</ul>
</li>
</ol>
<p><strong>路由转发原理</strong>：</p>
<p>以“电脑A（<code>192.168.0.105</code>）给电脑D（<code>192.168.1.11</code>）发数据”为例，路由器的转发流程：</p>
<ol>
<li>A 把数据包 <strong>经过交换机发到网关</strong>（路由器的内网端口 <code>192.168.0.107</code>，对应端口 <code>e3</code>）；</li>
<li>路由器收到数据包，查看目的 IP（<code>192.168.1.11</code>），<strong>发现两者网络号处于不同的局域网</strong>，源 IP 网络号为 <code>192.168.0.0</code>，目的 IP 网络号为 <code>192.168.1.0</code>，<strong>需要查找匹配路由表</strong>；</li>
<li>路由表中显示“目的网络 <code>192.168.1.0</code>，下一跳是 <code>192.168.1.23</code>（<strong>另一个路由器的端口</strong>），出接口是 <code>e2</code>”；</li>
<li>路由器将数据包转发到下一跳（<code>192.168.1.23</code>）；</li>
<li>最终数据包通过多个路由器（可能），转发到达交换机，交换机发现 MAC 地址是它局域网下的D机器，最后把数据包发送给 D。</li>
</ol>
<p>如果路由表里找不到，会打到默认网关，从 <code>e1</code> 口发出，发到 IP <code>192.0.2.1</code>。这个路由器的路由表不知道该去哪，也许可以其他路由器可以知道。😋</p>
<p><img src="https://sukicdn.com/wyx/i/2025/09/24/4146.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt="路由转发示意图"></p>
<blockquote>
<p>图片来源：<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1813700">硬核图解！30张图带你搞懂！路由器，集线器，交换机，网桥，光猫有啥区别？</a></p>
</blockquote>
<hr>
<h3 id="5-8-三层交换机">5.8 三层交换机</h3>
<p>传统的交换机工作在数据链路层（二层），只能转发同一网段的帧；路由器工作在网络层（三层），能转发跨网段的数据包，但转发速度比交换机慢。</p>
<p><strong>三层交换机</strong> 是“二层交换机+三层路由模块”的结合体，<strong>既具备交换机的高速转发能力，又具备路由器的跨网段路由功能</strong>，适合局域网内不同网段的互联（比如企业内部分为 <code>192.168.1.0</code>、<code>192.168.2.0</code>、<code>192.168.3.0</code> 三个网段，用三层交换机互联）。</p>
<p><strong>三层交换机 对比 路由器</strong>：</p>
<ul>
<li><strong>转发速度</strong>：三层交换机更快（基于硬件转发），路由器较慢（基于软件转发）；</li>
<li><strong>功能</strong>：路由器支持更多高级功能（如 VPN、防火墙），三层交换机功能更简单；</li>
<li><strong>适用场景</strong>：三层交换机用于局域网内跨网段互联，路由器用于局域网与互联网互联。</li>
</ul>
<hr>
<br/>
<h2 id="6-传输层：实现“端到端的可靠通信”">6 传输层：实现“端到端的可靠通信”</h2>
<p>网络层解决了“跨网段转发数据包”的问题，<strong>但不保证数据包的可靠性</strong>（可能丢包、乱序）；数据链路层解决了“设备到设备的帧转发”，<strong>但不关心“哪个应用程序”接收数据</strong>。</p>
<p>传输层的核心作用是：<strong>在两个应用程序之间建立“端到端”的通信</strong>，并保证 <strong>数据的可靠传输</strong>（或满足实时性需求）。😌</p>
<hr>
<h3 id="6-1-传输层的基础概念">6.1 传输层的基础概念</h3>
<h4 id="6-1-1-传输层的核心功能">6.1.1 传输层的核心功能</h4>
<ol>
<li><strong>端到端通信</strong>：将数据从 <strong>“发送端的应用程序”传到“接收端的应用程序”</strong>（比如A的QQ传到B的QQ），而不是“设备到设备”；</li>
<li><strong>可靠传输</strong>：通过确认、重传、排序等机制，保证数据不丢包、不重复、不乱序（TCP协议的核心）；</li>
<li><strong>流量控制</strong>：控制发送端的发送速率，避免接收端处理不过来导致丢包（TCP的滑动窗口机制）；</li>
<li><strong>拥塞控制</strong>：检测网络拥堵，减少发送速率，避免网络瘫痪（TCP的拥塞控制机制）；</li>
<li><strong>多路复用/分用</strong>：<strong>一个 IP 地址可以对应多个应用程序</strong>（通过端口号区分），比如电脑A的 IP 是 <code>192.168.1.2</code>，同时运行QQ（端口 <code>2333</code>）和浏览器（端口 <code>8888</code>），传输层能将数据分发给对应的应用程序。</li>
</ol>
<hr>
<h4 id="6-1-2-寻址与端口：区分“同一设备的不同应用”">6.1.2 寻址与端口：区分“同一设备的不同应用”</h4>
<p>传输层通过<strong>端口号</strong>来区分同一设备上的不同应用程序，端口号是16位的整数（<code>0-65535</code>），分为三类：</p>
<ul>
<li><strong>知名端口（0-1023）</strong>：分配给常用协议，比如HTTP用<code>80</code>，HTTPS用<code>443</code>，FTP用<code>21</code>，SMTP用<code>25</code>；</li>
<li><strong>注册端口（1024-49151）</strong>：由应用程序开发者向IANA注册，比如QQ、微信的端口；</li>
<li><strong>动态端口（49152-65535）</strong>：由操作系统动态分配，比如浏览器访问网站时，会临时分配一个动态端口。</li>
</ul>
<p><strong>“IP地址+端口号”构成了“套接字（Socket）”</strong>，比如 <code>192.168.1.2:80</code>，唯一标识网络中的一个应用程序，是传输层通信的“端点”。💻</p>
<hr>
<h4 id="6-1-3-传输层的服务类型">6.1.3 传输层的服务类型</h4>
<p>传输层提供两种服务，对应两种核心协议：</p>
<ul>
<li><strong>面向连接的可靠服务</strong>：<strong>TCP协议</strong>，适合需要可靠传输的场景（如文件传输、网页访问）；</li>
<li><strong>无连接的不可靠服务</strong>：<strong>UDP协议</strong>，适合需要实时性的场景（如视频通话、直播）。</li>
</ul>
<hr>
<h4 id="6-1-4-传输层与网络层的关系">6.1.4 传输层与网络层的关系</h4>
<ul>
<li><strong>网络层</strong>：<strong>点到点（Point-to-Point）通信</strong>，负责“数据包从<strong>一个路由器到另一个路由器</strong>”的转发，不关心应用程序；</li>
<li><strong>传输层</strong>：<strong>端到端（End-to-End）通信</strong>，负责“数据从<strong>一个应用程序到另一个应用程序</strong>”的传输，基于网络层提供的服务。</li>
</ul>
<p>总的来说：网络层是“公路”，负责把“货车（数据包）”从A地运到B地；传输层是“快递员”，负责把“货物（数据）”从A地的收件人（应用程序）送到B地的收件人（应用程序）。💻</p>
<hr>
<h3 id="6-2-UDP协议：追求“实时性”的轻量级协议">6.2 UDP协议：追求“实时性”的轻量级协议</h3>
<p>**UDP（用户数据报协议）**是传输层的 “轻量级协议”，核心特点是 “无连接、不可靠、开销小、实时性好”。</p>
<p><strong>UDP的核心特点</strong>：</p>
<ol>
<li><strong>无连接</strong>：发送数据前不需要建立连接，直接发送数据报（Datagram）；</li>
<li><strong>不可靠</strong>：不保证数据能到达接收端，不确认、不重传、不排序，丢包后不处理；</li>
<li><strong>面向报文</strong>：直接将应用层的数据封装成数据报，不拆分也不合并（应用层给多少数据，就传多少）；</li>
<li><strong>开销小</strong>：UDP头部只有8个字节（TCP头部有20-60字节），传输效率高；</li>
<li><strong>支持广播/组播</strong>：可以向多个设备同时发送数据（如直播、组播会议）。</li>
</ol>
<p><img src="https://sukicdn.com/wyx/i/2025/09/24/ksyu.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt="UDP 协议"></p>
<p><strong>UDP适用场景</strong>：</p>
<p>UDP 适合“<strong>实时性优先，可靠性其次</strong>”的场景。</p>
<ul>
<li><strong>视频/音频传输</strong>：如直播、视频通话（丢几帧不影响整体观看）；</li>
<li><strong>游戏数据传输</strong>：如王者荣耀、英雄联盟（延迟比丢包更重要）；</li>
<li><strong>DNS查询</strong>：DNS请求数据量小，需要快速响应；</li>
<li><strong>物联网设备</strong>：如传感器数据传输（数据量小，实时性要求高）。</li>
</ul>
<hr>
<h3 id="6-3-TCP协议：追求“可靠性”的核心协议">6.3 TCP协议：追求“可靠性”的核心协议</h3>
<p><strong>TCP（传输控制协议）</strong> 是传输层的“核心协议”，核心特点是“面向连接、可靠传输、面向字节流、开销大”，是互联网中最常用的协议（如 HTTP、HTTPS、FTP、邮件都基于 TCP）。</p>
<p><strong>TCP的核心特点</strong>：</p>
<ol>
<li><strong>面向连接</strong>：通信前必须建立连接（<strong>三次握手</strong>），通信后必须断开连接（<strong>四次挥手</strong>）；</li>
<li><strong>可靠传输</strong>：通过“确认重传、排序、校验、流量控制、拥塞控制”保证数据不丢包、不重复、不乱序；</li>
<li><strong>面向字节流</strong>：将应用层的数据拆分成多个“段（Segment）”发送，接收端再合并成字节流交给应用层；</li>
<li><strong>全双工通信</strong>：通信双方可以同时发送和接收数据；</li>
<li><strong>开销大</strong>：TCP头部有 20-60 字节（包含序列号、确认号、窗口大小等字段），传输效率比 UDP 低。</li>
</ol>
<p><strong>TCP核心机制</strong>：</p>
<ol>
<li>
<p><strong>三次握手（建立连接）</strong> 🤝：确保双方都能收发数据，避免“失效的连接请求”被误处理；</p>
<ul>
<li>客户端（A）发SYN包：“我想连接你，我的初始序列号是x”；</li>
<li>服务器（B）发SYN+ACK包：“我同意连接，我的初始序列号是y，确认收到你的x”；</li>
<li>客户端（A）发ACK包：“确认收到你的y，连接建立”。</li>
</ul>
</li>
<li>
<p><strong>数据传输</strong> ✉️：</p>
<ul>
<li>发送方（如客户端）将 <strong>数据分割成段，按顺序发送</strong>，并为每个段分配一个序列号。</li>
<li>接收方（如服务器）收到数据段后，<strong>会发送一个 ACK（确认）包回来</strong>，告知发送方“我已成功收到第 X 号数据”。</li>
<li>如果发送方在一定时间内没有收到 ACK，它会认为数据包丢失，并重新发送该数据包。这就是可靠性的核心。</li>
</ul>
</li>
<li>
<p><strong>四次挥手（断开连接）</strong> 👋：确保双方都已完成数据传输，避免数据丢失；</p>
<ul>
<li>客户端（A）发FIN包：“我没有数据要发了，想断开连接”；</li>
<li>服务器（B）发ACK包：“确认收到，我还在处理剩余数据”；</li>
<li>服务器（B）发FIN包：“我也没有数据要发了，可以断开连接”；</li>
<li>客户端（A）发ACK包：“确认收到，断开连接”。</li>
</ul>
</li>
</ol>
<p><img src="https://sukicdn.com/wyx/i/2025/09/24/nj49.png" srcset="https://sukicdn.com/wyx/i/2025/01/10/dlz.gif" lazyload alt="TCP 协议"></p>
<p><strong>TCP的应用场景</strong>：</p>
<p>TCP 适合“<strong>可靠性优先，实时性其次</strong>”的场景。</p>
<ul>
<li><strong>网页访问（HTTP/HTTPS）</strong>：网页内容不能丢包，否则显示错乱；</li>
<li><strong>文件传输（FTP）</strong>：传文件不能丢包，否则文件损坏；</li>
<li><strong>电子邮件（SMTP/POP3）</strong>：邮件不能丢失；</li>
<li><strong>即时通信的文本消息（如微信文字）</strong>：文字消息需要可靠传输，不能丢。</li>
</ul>
<hr>
<br/>
<h2 id="7-应用层：直接为“应用程序”服务">7 应用层：直接为“应用程序”服务</h2>
<p><strong>应用层是网络的最上层</strong>，直接为应用程序提供网络服务——我们日常用的浏览器、QQ、邮件客户端，都是通过应用层协议与服务器通信的。</p>
<p>应用层不关心数据的传输细节（那是下四层的事），只关心“如何满足应用程序的需求”（比如浏览网页需要 HTTP 协议，发邮件需要 SMTP 协议）。</p>
<hr>
<h3 id="7-1-应用层的基础概念">7.1 应用层的基础概念</h3>
<h4 id="7-1-1-应用层的核心功能">7.1.1 应用层的核心功能</h4>
<ol>
<li><strong>为应用程序提供网络接口</strong>：比如浏览器通过 HTTP 协议访问网页，QQ通过自定义协议发送消息；</li>
<li><strong>处理应用层协议细节</strong>：比如HTTP协议处理“请求行、响应头、响应体”的格式，DNS协议处理“域名到IP的解析”；</li>
<li><strong>数据格式转换</strong>：比如将应用程序的文本数据转换成网络传输的二进制数据，接收端再转换回文本；</li>
<li><strong>用户认证与授权</strong>：比如HTTP的Basic认证、HTTPS的证书认证，确保通信安全。</li>
</ol>
<hr>
<h4 id="7-1-2-应用层的两种工作模式：C-S与B-S">7.1.2 应用层的两种工作模式：C/S与B/S</h4>
<ol>
<li>
<p><em><strong>C/S模式（客户机/服务器模式）</strong></em></p>
<ul>
<li><strong>结构</strong>：分为“客户端（Client）”和“服务器（Server）”两部分；
<ul>
<li>客户端：安装在用户设备上的应用程序，如QQ客户端、微信客户端、FTP客户端；</li>
<li>服务器：运行在远程机房的服务器程序，如QQ服务器、微信服务器、FTP服务器；</li>
</ul>
</li>
<li><strong>工作流程</strong>：客户端主动向服务器发送请求，服务器接收请求后处理并返回响应；</li>
<li><strong>特点</strong>：
<ul>
<li>客户端需要安装专门的软件；</li>
<li>服务器需要24小时开机，处理大量客户端请求；</li>
<li>安全性高（客户端和服务器之间的协议可自定义）；</li>
</ul>
</li>
<li><strong>典型应用</strong>：QQ、微信、穿越火线😋。</li>
</ul>
</li>
<li>
<p><strong>B/S模式（浏览器/服务器模式）</strong></p>
<ul>
<li><strong>结构</strong>：分为“浏览器（Browser）”和“服务器（Server）”两部分，没有专门的客户端；
<ul>
<li><strong>浏览器</strong>：如Chrome、Edge、Firefox，是通用的客户端软件；</li>
<li><strong>服务器</strong>：如Web服务器（Nginx、Apache）、应用服务器（Tomcat、Spring Boot）；</li>
</ul>
</li>
<li><strong>工作流程</strong>：用户在浏览器中输入 URL，浏览器发送HTTP请求到服务器，服务器返回 HTML 页面，浏览器渲染页面并显示；</li>
<li><strong>特点</strong>：
<ul>
<li>不需要安装专门的客户端，用浏览器即可；</li>
<li>开发和维护成本低（只需维护服务器）；</li>
<li>安全性依赖 HTTP/HTTPS 协议；</li>
</ul>
</li>
<li><strong>典型应用</strong>：百度、淘宝、在线文档（如腾讯文档）、Qwen网页端。</li>
</ul>
</li>
</ol>
<hr>
<h4 id="7-1-3-应用层常见协议">7.1.3 应用层常见协议</h4>
<ul>
<li>网页访问：HTTP、HTTPS；</li>
<li>域名解析：DNS；</li>
<li>文件传输：FTP、SFTP；</li>
<li>电子邮件：SMTP、POP3、IMAP；</li>
<li>远程登录：Telnet、SSH；</li>
<li>即时通信：XMPP（如早期QQ）、WebSocket（如网页版微信）。</li>
</ul>
<hr>
<h4 id="7-1-4-应用层与传输层的关系">7.1.4 应用层与传输层的关系</h4>
<ul>
<li><strong>应用层依赖传输层提供的服务</strong>：应用层协议需要基于 TCP 或 UDP 协议传输数据；
<ul>
<li><strong>基于 TCP 的应用层协议</strong>：HTTP、HTTPS、FTP、SMTP、POP3（需要可靠传输）；</li>
<li><strong>基于 UDP 的应用层协议</strong>：DNS、TFTP（简单文件传输协议）、RTP（实时传输协议，用于视频/音频）；</li>
</ul>
</li>
<li><strong>传输层为应用层提供“端口号”</strong>：应用层协议通过端口号找到对应的应用程序，比如 HTTP 用 TCP 80 端口，HTTPS 用TCP 443端口。</li>
</ul>
<hr>
<h3 id="7-2-DNS与FTP协议：域名解析与文件传输">7.2 DNS与FTP协议：域名解析与文件传输</h3>
<h4 id="7-2-1-DNS协议（域名系统）">7.2.1 DNS协议（域名系统）</h4>
<p>我们访问网站时，输入的是 <strong>域名</strong>（如 <code>www.baidu.com</code>），但电脑需要IP地址才能通信——DNS协议的作用就是“<strong>将域名转换成IP地址</strong>”，相当于“网络中的通讯录”。</p>
<p><strong>DNS的工作流程</strong>：</p>
<ol>
<li>用户在浏览器输入 <code>www.baidu.com</code>，浏览器 <strong>先查询本地DNS缓存</strong>（电脑自带的缓存），如果有对应的 IP，直接访问；</li>
<li>如果本地缓存没有，浏览器向“本地 DNS 服务器”（通常是路由器或运营商提供的 DNS，如 <code>114.114.114.114</code>）<strong>发送 DNS 查询请求</strong>；</li>
<li>本地 DNS 服务器查询自己的缓存，如果有，返回IP；<strong>如果没有，向“根DNS服务器”发送请求</strong>；</li>
<li>根 DNS 服务器返回“.com顶级域DNS服务器”的地址；</li>
<li>本地 DNS 服务器向“.com顶级域DNS服务器”发送请求，返回“baidu.com权威 DNS 服务器”的地址；</li>
<li>本地 DNS 服务器向“<code>baidu.com</code>权威DNS服务器”发送请求，返回 <code>www.baidu.com</code> 的 IP 地址（如 <code>180.101.49.12</code>）；</li>
<li>本地 DNS 服务器将 IP 地址返回给浏览器，浏览器用该IP访问百度服务器。</li>
</ol>
<p><strong>DNS的特点</strong>：</p>
<ul>
<li><strong>基于 UDP 协议</strong>（数据量小，响应快），如果 UDP 查询失败，会用 TCP 重试；</li>
<li><strong>支持递归查询</strong>（本地DNS服务器帮用户查询所有层级）和迭代查询（根DNS服务器返回下一级 DNS 地址，用户自己查询）；</li>
<li><strong>有缓存机制</strong>，减少重复查询，提高效率。</li>
</ul>
<hr>
<h4 id="7-2-2-FTP协议（文件传输协议）">7.2.2 FTP协议（文件传输协议）</h4>
<p><strong>FTP 协议</strong>是用于“<strong>在客户端和服务器之间传输文件</strong>”的应用层协议，比如网站开发者将网页文件上传到服务器，用户从服务器下载软件安装包，都可以用FTP。</p>
<p><strong>FTP的核心特点：</strong></p>
<ul>
<li><strong>基于TCP协议</strong>（可靠传输，确保文件不损坏）；</li>
<li><strong>使用两个连接</strong>：
<ul>
<li>控制连接（TCP 21 端口）：用于传输命令和响应（如登录、上传/下载指令、断开连接），整个会话期间保持连接；</li>
<li>数据连接（主动模式用 TCP 20 端口，被动模式用随机端口）：用于传输文件数据（如上传的HTML文件、下载的压缩包），传输完成后断开；</li>
</ul>
</li>
<li><strong>支持两种传输模式</strong>：
<ul>
<li>ASCII模式：传输文本文件（如 <code>.txt</code>、<code>.html</code>）；</li>
<li>二进制模式：传输非文本文件（如 <code>.exe</code>、<code>.zip</code>、图片、视频）；</li>
</ul>
</li>
<li><strong>支持用户认证</strong>：需要输入用户名和密码才能登录 FTP 服务器（也支持匿名登录）。</li>
</ul>
<p><strong>FTP的应用场景：</strong></p>
<ul>
<li><strong>网站维护</strong>：开发者用 FTP 客户端（如FileZilla）将网页文件上传到Web服务器；</li>
<li><strong>企业文件共享</strong>：企业搭建 FTP 服务器，供员工上传下载工作文件；</li>
<li><strong>软件下载</strong>：早期的软件下载站用 FTP 提供下载服务（现在多被 HTTP 下载取代）。</li>
</ul>
<hr>
<h3 id="7-3-电子邮件协议与WWW、HTTP协议">7.3 电子邮件协议与WWW、HTTP协议</h3>
<h4 id="7-3-1-电子邮件协议：SMTP、POP3、IMAP">7.3.1 电子邮件协议：SMTP、POP3、IMAP</h4>
<p>电子邮件（如QQ邮箱、163邮箱）的传输需要三个核心协议配合：</p>
<ol>
<li>
<p><em><strong>SMTP协议（简单邮件传输协议）</strong></em></p>
<ul>
<li><strong>作用</strong>：<strong>发送邮件</strong>，负责将邮件从“发件人邮箱服务器”传输到“收件人邮箱服务器”；</li>
<li><strong>基于TCP协议</strong>（端口25，加密版用465）；</li>
<li><strong>流程</strong>：比如用户A（a@qq.com）给用户B（b@163.com）发邮件，A的邮箱客户端通过 SMTP 协议将邮件发送到 QQ 邮箱服务器，QQ 邮箱服务器再通过 SMTP 协议将邮件转发到163邮箱服务器。</li>
</ul>
</li>
<li>
<p><em><strong>POP3协议（邮局协议版本3）</strong></em></p>
<ul>
<li><strong>作用</strong>：<strong>接收邮件</strong>，负责将“收件人邮箱服务器”中的邮件下载到“本地客户端”；</li>
<li><strong>基于TCP协议</strong>（端口110，加密版用995）；</li>
<li><strong>特点</strong>：
<ul>
<li>下载邮件后，默认将服务器上的邮件删除（可设置保留）；</li>
<li>不支持邮件同步，本地修改（如标记已读）不会同步到服务器；</li>
</ul>
</li>
<li><strong>适用场景</strong>：适合用单台设备接收邮件（如个人电脑）。</li>
</ul>
</li>
<li>
<p><em><strong>IMAP协议（互联网邮件访问协议）</strong></em></p>
<ul>
<li><strong>作用</strong>：<strong>接收邮件</strong>，比POP3更先进，支持“邮件同步”；</li>
<li><strong>基于TCP协议</strong>（端口143，加密版用993）；</li>
<li><strong>特点</strong>：
<ul>
<li>邮件默认保存在服务器上，本地客户端只下载邮件的摘要（如发件人、主题），查看时再下载完整内容；</li>
<li>支持邮件同步：本地修改（如标记已读、删除、移动文件夹）会同步到服务器，多台设备（电脑、手机）访问时邮件状态一致；</li>
</ul>
</li>
<li><strong>适用场景</strong>：适合用多台设备接收邮件（如同时用电脑和手机查邮箱）。</li>
</ul>
</li>
</ol>
<hr>
<h4 id="7-3-2-WWW与HTTP协议：网页访问的核心">7.3.2 WWW与HTTP协议：网页访问的核心</h4>
<ol>
<li>
<p><strong>WWW（万维网）</strong></p>
<p><strong>WWW（World Wide Web，万维网）是互联网上最常用的服务</strong>，由无数“网页”组成，用户通过浏览器访问网页。</p>
<p><strong>WWW的核心组成</strong>：</p>
<ul>
<li><strong>网页</strong>：由 HTML（结构）、CSS（样式）、JavaScript（交互）组成；</li>
<li><strong>URL（统一资源定位符）</strong>：访问网页的地址，如 <code>https://www.baidu.com/s?wd=计算机网络</code>；</li>
<li><strong>Web服务器</strong>：存储网页文件，响应浏览器的请求（如Nginx、Apache）。</li>
</ul>
</li>
<li>
<p><strong>HTTP协议（超文本传输协议）</strong></p>
<p><strong>HTTP 协议是 WWW 的“核心通信协议”</strong>，负责“浏览器和Web服务器之间的请求与响应”，比如打开百度，浏览器就是通过 HTTP 协议向百度服务器请求网页，服务器通过 HTTP 协议返回网页内容。</p>
<p><strong>HTTP的工作流程</strong>：</p>
<ol>
<li>用户在浏览器输入URL（<code>https://www.baidu.com</code>）；</li>
<li><strong>浏览器解析 URL</strong>，确定 Web 服务器的域名（<code>www.baidu.com</code>），<strong>通过 DNS 解析得到 IP 地址</strong>；</li>
<li><strong>浏览器与百度服务器建立 TCP 连接</strong>（三次握手）；</li>
<li><strong>浏览器发送 HTTP 请求</strong>（Request）：包含请求行（如GET / HTTP/1.1）、请求头（如User-Agent、Cookie）、请求体（可选，如表单数据）；</li>
<li><strong>百度服务器处理请求</strong>，返回 HTTP 响应（Response）：包含状态码（如 200 表示成功）、响应头（如Content-Type、Server）、响应体（HTML 网页内容）；</li>
<li><strong>浏览器接收响应</strong>，解析HTML、CSS、JavaScript，渲染网页并显示；</li>
<li>（可选）<strong>TCP连接断开</strong>（四次挥手）。</li>
</ol>
<p><strong>HTTP的特点：</strong></p>
<ul>
<li><strong>基于TCP协议</strong>（可靠传输，确保网页内容完整）；</li>
<li><strong>无状态</strong>：服务器不保存客户端的状态（比如你第一次访问百度和第二次访问，服务器不知道你是同一个人），需要用Cookie、Session来保持状态；</li>
<li><strong>明文传输</strong>：HTTP请求和响应都是明文，容易被截获和篡改（不安全），所以现在主流用HTTPS。</li>
</ul>
</li>
<li>
<p><strong>HTTPS协议（HTTP+SSL/TLS）</strong></p>
<p><strong>HTTPS是“HTTP+SSL/TLS加密”的组合</strong>，解决了HTTP明文传输的安全问题，现在所有涉及支付、登录的网站（如淘宝、网银）都用HTTPS。</p>
<p><strong>HTTPS的核心特点</strong>：</p>
<ul>
<li><strong>加密传输</strong>：通过SSL/TLS协议对HTTP请求和响应进行加密，防止数据被截获；</li>
<li><strong>身份认证</strong>：Web服务器需要安装“SSL证书”（由权威机构颁发），浏览器验证证书的合法性，确保访问的是真实服务器（不是钓鱼网站）；</li>
<li><strong>基于TCP协议</strong>，端口号443；</li>
<li><strong>开销比HTTP大</strong>（加密解密需要时间），但安全性高。</li>
</ul>
</li>
</ol>
<hr>
<br/>
<h2 id="总结">总结</h2>
<p>从两台电脑直连，到亿万台设备组成的互联网，核心逻辑就是“分层协作”：</p>
<ul>
<li><strong>物理层</strong>：传信号，解决“能不能传”；</li>
<li><strong>数据链路层</strong>：加MAC地址，解决“发给哪个设备”；</li>
<li><strong>网络层</strong>：加IP地址、选路径，解决“跨网段怎么传”；</li>
<li><strong>传输层</strong>：加端口号、保证可靠，解决“发给哪个应用”；</li>
<li><strong>应用层</strong>：提供服务，解决“应用程序需要什么”。</li>
</ul>
<p>每一层只做自己的事，下层为上层提供服务，上层不用关心下层的细节——这就是计算机网络的“分层思想”。😎</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E8%BF%BD%E9%80%90%E7%B9%81%E6%98%9F/" class="category-chain-item">追逐繁星</a>
  
  
    <span>></span>
    
  <a href="/categories/%E8%BF%BD%E9%80%90%E7%B9%81%E6%98%9F/Linux-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="category-chain-item">Linux 网络编程</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Linux/" class="print-no-link">#Linux</a>
      
        <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E3%80%81%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="print-no-link">#计算机网络、网络编程</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>「Linux 网络编程」计算机网络核心知识</div>
      <div>https://marisamagic.github.io/2025/09/23/20250923/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>MarisaMagic</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年9月23日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/09/30/20250930/" title="「Linux 网络编程」Socket 构建 TCP 本地通信">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">「Linux 网络编程」Socket 构建 TCP 本地通信</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/09/21/20250921/" title="「Linux 系统编程」信号量与生产者-消费者模型">
                        <span class="hidden-mobile">「Linux 系统编程」信号量与生产者-消费者模型</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  








    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
           <div style="font-size: 1rem"> <span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span> <script src="/js/duration.js"></script> </div> Blog by MarisaMagic <br/> Made with  <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>




  
<script src="/js/scrollAnimation.js"></script>



<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
